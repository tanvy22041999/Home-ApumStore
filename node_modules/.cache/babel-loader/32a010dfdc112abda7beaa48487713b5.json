{"ast":null,"code":"import _classCallCheck from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{compose}from'redux';import{withTranslation}from'react-i18next';import ProductsActions from'../../redux/actions/products';import'./styles.css';// Functions\nimport tryConvert from'../../utils/changeMoney';import numberWithCommas from\"../../utils/formatPrice\";import{toastError}from'../../utils/toastHelper';var CartPage=/*#__PURE__*/function(_Component){_inherits(CartPage,_Component);var _super=_createSuper(CartPage);function CartPage(props){var _this;_classCallCheck(this,CartPage);_this=_super.call(this,props);_this.checkoutOrder=function(){var _this$props=_this.props,history=_this$props.history,checkout=_this$props.checkout;if(checkout.length===0)toastError(\"Bạn chưa chọn sản phẩm checkout\");else history.push('/carts/checkout');};_this.onUpdateQuantity=function(product,color,quantity){var onUpdateProductInCart=_this.props.onUpdateProductInCart;if(quantity>0){onUpdateProductInCart(product,color,quantity);}};_this.onDeleteProductInCart=function(product,color){var onDeleteProductInCart=_this.props.onDeleteProductInCart;onDeleteProductInCart(product,color);};_this.setCheckout=function(e){var _e$target=e.target,checked=_e$target.checked,value=_e$target.value;var _this$props2=_this.props,onAddCheckout=_this$props2.onAddCheckout,onDeleteCheckout=_this$props2.onDeleteCheckout;if(checked===true){onAddCheckout(JSON.parse(value));}else{onDeleteCheckout(JSON.parse(value));}};_this.setCheckoutAll=function(e){var checked=e.target.checked;var _this$props3=_this.props,cart=_this$props3.cart,onCheckoutAll=_this$props3.onCheckoutAll,onClearAllCheckout=_this$props3.onClearAllCheckout;if(checked===true){onCheckoutAll(cart);_this.setState({checkedAll:true});}else{onClearAllCheckout();_this.setState({checkedAll:false});}};_this.state={total:0,totalPrice:0,checkedAll:false};return _this;}_createClass(CartPage,[{key:\"UNSAFE_componentWillMount\",value:function UNSAFE_componentWillMount(){document.title=\"[ApumStore] Trang bán hàng\";}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var total=0;var totalPrice=0;var checkout=this.props.checkout;if(checkout!==prevProps.checkout){var _loop=function _loop(i){total=total+checkout[i].quantity;totalPrice=totalPrice+checkout[i].quantity*checkout[i].product.colors.find(function(item){return item.id===checkout[i].color;}).price;};for(var i=0;i<checkout.length;i++){_loop(i);}this.setState({total:total,totalPrice:totalPrice});}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,totalPrice=_this$state.totalPrice,checkedAll=_this$state.checkedAll;var _this$props4=this.props,cart=_this$props4.cart,currency=_this$props4.currency,userInfo=_this$props4.userInfo,t=_this$props4.t;return/*#__PURE__*/React.createElement(\"div\",{className:\"container my-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 my-2\"},/*#__PURE__*/React.createElement(\"a\",{className:\"text-decoration-none directory rounded p-2\",href:\"/#/\"},t('header.home.menu')),/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-chevron-right px-2 w-25-px\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"font-weight-bold\"},t('cart.page.title'))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 my-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"rounded shadow-sm my-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"px-3 py-2\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mb-1\"},t('common.product')),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2 border-bottom\"}),cart.length>0?cart.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1 col-2 text-center align-self-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-check form-switch\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"flexSwitchCheckDefault\",checked:checkedAll||undefined,disabled:checkedAll,value:JSON.stringify(item),onChange:function onChange(e){return _this2.setCheckout(e);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-sm-4 col-md-3 text-center\"},/*#__PURE__*/React.createElement(\"img\",{className:\"float-start\",alt:item.product.name,src:item.product.bigimage?item.product.bigimage.publicUrl:\"http://www.pha.gov.pk/img/img-02.jpg\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-sm-8 col-md-9 align-self-center\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold mb-0\"},item.product.name),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0 text-secondary\"},t('common.color'),\" \",item.product.colors.find(function(i){return i.id===item.color;}).nameEn)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-3 align-self-center text-center\"},currency===\"VND\"?numberWithCommas(item.product.colors.find(function(i){return i.id===item.color;}).price):numberWithCommas(parseFloat(tryConvert(item.product.colors.find(function(i){return i.id===item.color;}).price,currency,false)).toFixed(2)),\" \",currency),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-6 align-self-center text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"quantity form-inline\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"rounded-circle outline-none\",onClick:function onClick(){return _this2.onUpdateQuantity(item.product,item.color,item.quantity-1);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-minus\"})),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",size:\"4\",className:\"form-control\",value:item.quantity,min:\"0\",step:\"1\",readOnly:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"rounded-circle outline-none\",onClick:function onClick(){return _this2.onUpdateQuantity(item.product,item.color,item.quantity+1);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-4 align-self-center text-right font-weight-bold\"},currency===\"VND\"?numberWithCommas(item.quantity*item.product.colors.find(function(i){return i.id===item.color;}).price):numberWithCommas(parseFloat(tryConvert(item.quantity*item.product.colors.find(function(i){return i.id===item.color;}).price,currency,false)).toFixed(2)),\" \",currency),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1 col-2 text-center align-self-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-check form-switch\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn-close rounded-circle bg-light p-2\",onClick:function onClick(){return _this2.onDeleteProductInCart(item.product,item.color);}}))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"row my-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center my-5 py-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-120\"},/*#__PURE__*/React.createElement(\"img\",{className:\"h-100\",src:\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/cart/9bdd8040b334d31946f49e36beaf32db.png\",alt:\"404 not found\"})),/*#__PURE__*/React.createElement(\"h4\",null,t('header.cart.empty')))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 my-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"rounded shadow-sm my-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"px-3 py-2\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mb-1\"},t('cart.total.table')),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2 border-bottom\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2 col-5 align-self-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-check form-switch\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"flexSwitchCheckDefault\",onChange:function onChange(e){return _this2.setCheckoutAll(e);}}),/*#__PURE__*/React.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"flexSwitchCheckDefault\"},t('cart.all.choose')))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 col-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-6 align-self-center form-inline justify-content-end\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-0 font-weight-bold\"},currency===\"VND\"?numberWithCommas(totalPrice):numberWithCommas(parseFloat(tryConvert(totalPrice,currency,false)).toFixed(2)),\" \",currency),userInfo?cart[0]&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary ml-2\",onClick:function onClick(){return _this2.checkoutOrder();}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-credit-card mr-2\"}),t('cart.checkout.button')):/*#__PURE__*/React.createElement(\"a\",{className:\"btn btn-success ml-2\",href:\"/user/dang-nhap\"},t('header.login.button')))))))));}}]);return CartPage;}(Component);var mapStateToProps=function mapStateToProps(state){return{cart:state.cart,checkout:state.checkout,currency:state.currency,userInfo:state.auth.detail};};var mapDispatchToProps=function mapDispatchToProps(dispatch,props){return{onDeleteProductInCart:function onDeleteProductInCart(product,color){dispatch(ProductsActions.onDeleteProductInCart(product,color));},onUpdateProductInCart:function onUpdateProductInCart(product,color,quantity){dispatch(ProductsActions.onUpdateProductInCart(product,color,quantity));},onAddCheckout:function onAddCheckout(payload){dispatch(ProductsActions.onAddCheckout(payload));},onDeleteCheckout:function onDeleteCheckout(payload){dispatch(ProductsActions.onDeleteCheckout(payload));},onClearAllCheckout:function onClearAllCheckout(){dispatch(ProductsActions.onClearCheckout());},onCheckoutAll:function onCheckoutAll(payload){dispatch(ProductsActions.onCheckoutAll(payload));}};};var withConnect=connect(mapStateToProps,mapDispatchToProps);export default compose(withConnect,withTranslation())(CartPage);","map":{"version":3,"sources":["/Users/vyduong/Desktop/client/Home-ApumStore/src/components/CartPage/index.js"],"names":["React","Component","connect","compose","withTranslation","ProductsActions","tryConvert","numberWithCommas","toastError","CartPage","props","checkoutOrder","history","checkout","length","push","onUpdateQuantity","product","color","quantity","onUpdateProductInCart","onDeleteProductInCart","setCheckout","e","target","checked","value","onAddCheckout","onDeleteCheckout","JSON","parse","setCheckoutAll","cart","onCheckoutAll","onClearAllCheckout","setState","checkedAll","state","total","totalPrice","document","title","prevProps","i","colors","find","item","id","price","currency","userInfo","t","map","index","undefined","stringify","name","bigimage","publicUrl","nameEn","parseFloat","toFixed","mapStateToProps","auth","detail","mapDispatchToProps","dispatch","payload","onClearCheckout","withConnect"],"mappings":"4nBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,OAAR,KAAsB,OAAtB,CACA,OAASC,eAAT,KAAgC,eAAhC,CACA,MAAOC,CAAAA,eAAP,KAA4B,8BAA5B,CACA,MAAO,cAAP,CACA;AACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,yBAA7B,CACA,OAASC,UAAT,KAA2B,yBAA3B,C,GAEMC,CAAAA,Q,oGACJ,kBAAYC,KAAZ,CAAmB,0CACjB,uBAAMA,KAAN,EADiB,MA6BnBC,aA7BmB,CA6BH,UAAK,CACnB,gBAA4B,MAAKD,KAAjC,CAAOE,OAAP,aAAOA,OAAP,CAAgBC,QAAhB,aAAgBA,QAAhB,CACA,GAAGA,QAAQ,CAACC,MAAT,GAAoB,CAAvB,CAA0BN,UAAU,CAAC,iCAAD,CAAV,CAA1B,IACKI,CAAAA,OAAO,CAACG,IAAR,CAAa,iBAAb,EACN,CAjCkB,OAmCnBC,gBAnCmB,CAmCA,SAACC,OAAD,CAAUC,KAAV,CAAiBC,QAAjB,CAA8B,CAC/C,GAAKC,CAAAA,qBAAL,CAA8B,MAAKV,KAAnC,CAAKU,qBAAL,CACA,GAAGD,QAAQ,CAAG,CAAd,CAAgB,CACdC,qBAAqB,CAACH,OAAD,CAASC,KAAT,CAAgBC,QAAhB,CAArB,CACD,CACF,CAxCkB,OA0CnBE,qBA1CmB,CA0CK,SAACJ,OAAD,CAAUC,KAAV,CAAoB,CAC1C,GAAKG,CAAAA,qBAAL,CAA8B,MAAKX,KAAnC,CAAKW,qBAAL,CACAA,qBAAqB,CAACJ,OAAD,CAAUC,KAAV,CAArB,CACD,CA7CkB,OA+CnBI,WA/CmB,CA+CL,SAACC,CAAD,CAAO,CACnB,cAA2BA,CAAC,CAACC,MAA7B,CAAQC,OAAR,WAAQA,OAAR,CAAiBC,KAAjB,WAAiBA,KAAjB,CACA,iBAA4C,MAAKhB,KAAjD,CAAQiB,aAAR,cAAQA,aAAR,CAAuBC,gBAAvB,cAAuBA,gBAAvB,CACA,GAAGH,OAAO,GAAK,IAAf,CAAqB,CACnBE,aAAa,CAACE,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAD,CAAb,CACD,CAFD,IAEO,CACLE,gBAAgB,CAACC,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAD,CAAhB,CACD,CACF,CAvDkB,OAyDnBK,cAzDmB,CAyDF,SAACR,CAAD,CAAO,CACtB,GAAQE,CAAAA,OAAR,CAAoBF,CAAC,CAACC,MAAtB,CAAQC,OAAR,CACA,iBAAoD,MAAKf,KAAzD,CAAQsB,IAAR,cAAQA,IAAR,CAAcC,aAAd,cAAcA,aAAd,CAA6BC,kBAA7B,cAA6BA,kBAA7B,CACA,GAAGT,OAAO,GAAK,IAAf,CAAqB,CACnBQ,aAAa,CAACD,IAAD,CAAb,CACA,MAAKG,QAAL,CAAc,CAACC,UAAU,CAAE,IAAb,CAAd,EACD,CAHD,IAGO,CACLF,kBAAkB,GAClB,MAAKC,QAAL,CAAc,CAACC,UAAU,CAAE,KAAb,CAAd,EACD,CACF,CAnEkB,CAEjB,MAAKC,KAAL,CAAa,CACXC,KAAK,CAAE,CADI,CAEXC,UAAU,CAAE,CAFD,CAGXH,UAAU,CAAE,KAHD,CAAb,CAFiB,aAOlB,C,8DAED,oCAA4B,CAC1BI,QAAQ,CAACC,KAAT,CAAiB,4BAAjB,CACD,C,kCAED,4BAAmBC,SAAnB,CAA8B,CAC5B,GAAIJ,CAAAA,KAAK,CAAG,CAAZ,CACA,GAAIC,CAAAA,UAAU,CAAC,CAAf,CACA,GAAK1B,CAAAA,QAAL,CAAiB,KAAKH,KAAtB,CAAKG,QAAL,CACA,GAAIA,QAAQ,GAAK6B,SAAS,CAAC7B,QAA3B,CAAqC,0BAC3B8B,CAD2B,EAEjCL,KAAK,CAAGA,KAAK,CAAGzB,QAAQ,CAAC8B,CAAD,CAAR,CAAYxB,QAA5B,CACAoB,UAAU,CAAGA,UAAU,CAAE1B,QAAQ,CAAC8B,CAAD,CAAR,CAAYxB,QAAZ,CAAsBN,QAAQ,CAAC8B,CAAD,CAAR,CAAY1B,OAAZ,CAAoB2B,MAApB,CAA2BC,IAA3B,CAAgC,SAAAC,IAAI,QAAGA,CAAAA,IAAI,CAACC,EAAL,GAAYlC,QAAQ,CAAC8B,CAAD,CAAR,CAAYzB,KAA3B,EAApC,EAAsE8B,KAArH,CAHiC,EACnC,IAAI,GAAIL,CAAAA,CAAC,CAAC,CAAV,CAAaA,CAAC,CAAE9B,QAAQ,CAACC,MAAzB,CAAiC6B,CAAC,EAAlC,CAAqC,OAA7BA,CAA6B,EAGpC,CACD,KAAKR,QAAL,CAAc,CACZG,KAAK,CAALA,KADY,CAEZC,UAAU,CAAVA,UAFY,CAAd,EAID,CACF,C,sBA0CD,iBAAS,iBACP,gBAAiC,KAAKF,KAAtC,CAAME,UAAN,aAAMA,UAAN,CAAkBH,UAAlB,aAAkBA,UAAlB,CACA,iBAAsC,KAAK1B,KAA3C,CAAMsB,IAAN,cAAMA,IAAN,CAAYiB,QAAZ,cAAYA,QAAZ,CAAsBC,QAAtB,cAAsBA,QAAtB,CAAgCC,CAAhC,cAAgCA,CAAhC,CACA,mBACA,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,yBAAG,SAAS,CAAC,4CAAb,CAA0D,IAAI,CAAC,KAA/D,EAAsEA,CAAC,CAAC,kBAAD,CAAvE,CADF,cAEE,yBAAG,SAAS,CAAC,kCAAb,EAFF,CADF,cAKE,2BAAK,SAAS,CAAC,QAAf,eACE,0BAAI,SAAS,CAAC,kBAAd,EAAkCA,CAAC,CAAC,iBAAD,CAAnC,CADF,CALF,cAQE,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,0BAAI,SAAS,CAAC,MAAd,EAAsBA,CAAC,CAAC,gBAAD,CAAvB,CADF,cAEE,2BAAK,SAAS,CAAC,oBAAf,EAFF,CAGGnB,IAAI,CAAClB,MAAL,CAAc,CAAd,CAAkBkB,IAAI,CAACoB,GAAL,CAAS,SAACN,IAAD,CAAOO,KAAP,CAAiB,CAC3C,mBACE,2BAAK,SAAS,CAAC,KAAf,CAAqB,GAAG,CAAEA,KAA1B,eACE,2BAAK,SAAS,CAAC,8CAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,6BAAO,SAAS,CAAC,kBAAjB,CAAoC,IAAI,CAAC,UAAzC,CAAoD,EAAE,CAAC,wBAAvD,CAAgF,OAAO,CAAEjB,UAAU,EAAIkB,SAAvG,CAAkH,QAAQ,CAAElB,UAA5H,CAAwI,KAAK,CAAEP,IAAI,CAAC0B,SAAL,CAAeT,IAAf,CAA/I,CAAqK,QAAQ,CAAE,kBAACvB,CAAD,QAAK,CAAA,MAAI,CAACD,WAAL,CAAiBC,CAAjB,CAAL,EAA/K,EADF,CADF,CADF,cAME,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,qCAAf,eACE,2BAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAEuB,IAAI,CAAC7B,OAAL,CAAauC,IAA/C,CAAqD,GAAG,CAAEV,IAAI,CAAC7B,OAAL,CAAawC,QAAb,CAAwBX,IAAI,CAAC7B,OAAL,CAAawC,QAAb,CAAsBC,SAA9C,CAA0D,sCAApH,EADF,CADF,cAIE,2BAAK,SAAS,CAAC,2CAAf,eACA,yBAAG,SAAS,CAAC,uBAAb,EAAsCZ,IAAI,CAAC7B,OAAL,CAAauC,IAAnD,CADA,cAEA,yBAAG,SAAS,CAAC,qBAAb,EAAoCL,CAAC,CAAC,cAAD,CAArC,KAAwDL,IAAI,CAAC7B,OAAL,CAAa2B,MAAb,CAAoBC,IAApB,CAAyB,SAAAF,CAAC,QAAIA,CAAAA,CAAC,CAACI,EAAF,GAASD,IAAI,CAAC5B,KAAlB,EAA1B,EAAmDyC,MAA3G,CAFA,CAJF,CADF,CANF,cAiBE,2BAAK,SAAS,CAAC,8CAAf,EACCV,QAAQ,GAAG,KAAX,CACC1C,gBAAgB,CAACuC,IAAI,CAAC7B,OAAL,CAAa2B,MAAb,CAAoBC,IAApB,CAAyB,SAAAF,CAAC,QAAIA,CAAAA,CAAC,CAACI,EAAF,GAASD,IAAI,CAAC5B,KAAlB,EAA1B,EAAmD8B,KAApD,CADjB,CAECzC,gBAAgB,CAACqD,UAAU,CAACtD,UAAU,CAACwC,IAAI,CAAC7B,OAAL,CAAa2B,MAAb,CAAoBC,IAApB,CAAyB,SAAAF,CAAC,QAAIA,CAAAA,CAAC,CAACI,EAAF,GAASD,IAAI,CAAC5B,KAAlB,EAA1B,EAAmD8B,KAApD,CAA2DC,QAA3D,CAAqE,KAArE,CAAX,CAAV,CAAkGY,OAAlG,CAA0G,CAA1G,CAAD,CAHlB,KAGmIZ,QAHnI,CAjBF,cAsBE,2BAAK,SAAS,CAAC,8CAAf,eACE,2BAAK,SAAS,CAAC,sBAAf,eACE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,6BAAhC,CAA8D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACjC,gBAAL,CAAsB8B,IAAI,CAAC7B,OAA3B,CAAoC6B,IAAI,CAAC5B,KAAzC,CAAgD4B,IAAI,CAAC3B,QAAL,CAAgB,CAAhE,CAAN,EAAvE,eACE,yBAAG,SAAS,CAAC,aAAb,EADF,CADF,cAIE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,GAA1B,CAA8B,SAAS,CAAC,cAAxC,CAAuD,KAAK,CAAE2B,IAAI,CAAC3B,QAAnE,CAA6E,GAAG,CAAC,GAAjF,CAAqF,IAAI,CAAC,GAA1F,CAA8F,QAAQ,KAAtG,EAJF,cAKE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,6BAAhC,CAA8D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACH,gBAAL,CAAsB8B,IAAI,CAAC7B,OAA3B,CAAoC6B,IAAI,CAAC5B,KAAzC,CAAgD4B,IAAI,CAAC3B,QAAL,CAAgB,CAAhE,CAAN,EAAvE,eACE,yBAAG,SAAS,CAAC,YAAb,EADF,CALF,CADF,CAtBF,cAiCE,2BAAK,SAAS,CAAC,8DAAf,EACC8B,QAAQ,GAAG,KAAX,CACC1C,gBAAgB,CAACuC,IAAI,CAAC3B,QAAL,CAAgB2B,IAAI,CAAC7B,OAAL,CAAa2B,MAAb,CAAoBC,IAApB,CAAyB,SAAAF,CAAC,QAAIA,CAAAA,CAAC,CAACI,EAAF,GAASD,IAAI,CAAC5B,KAAlB,EAA1B,EAAmD8B,KAApE,CADjB,CAECzC,gBAAgB,CAACqD,UAAU,CAACtD,UAAU,CAACwC,IAAI,CAAC3B,QAAL,CAAgB2B,IAAI,CAAC7B,OAAL,CAAa2B,MAAb,CAAoBC,IAApB,CAAyB,SAAAF,CAAC,QAAIA,CAAAA,CAAC,CAACI,EAAF,GAASD,IAAI,CAAC5B,KAAlB,EAA1B,EAAmD8B,KAApE,CAA2EC,QAA3E,CAAqF,KAArF,CAAX,CAAV,CAAkHY,OAAlH,CAA0H,CAA1H,CAAD,CAHlB,KAGmJZ,QAHnJ,CAjCF,cAsCE,2BAAK,SAAS,CAAC,8CAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,uCAAhC,CAAwE,OAAO,CAAE,yBAAK,CAAA,MAAI,CAAC5B,qBAAL,CAA2ByB,IAAI,CAAC7B,OAAhC,CAAyC6B,IAAI,CAAC5B,KAA9C,CAAL,EAAjF,EADF,CADF,CAtCF,CADF,CA8CD,CA/CkB,CAAlB,cA+CI,2BAAK,SAAS,CAAC,UAAf,eACL,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,uBAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,2BAAK,SAAS,CAAC,OAAf,CAAuB,GAAG,CAAC,qGAA3B,CAAiI,GAAG,CAAC,eAArI,EADF,CADF,cAIE,8BAAKiC,CAAC,CAAC,mBAAD,CAAN,CAJF,CADJ,CADK,CAlDP,CADF,CADF,CARF,cAyEE,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,0BAAI,SAAS,CAAC,MAAd,EAAsBA,CAAC,CAAC,kBAAD,CAAvB,CADF,cAEE,2BAAK,SAAS,CAAC,oBAAf,EAFF,cAGE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,kCAAf,eACA,2BAAK,SAAS,CAAC,wBAAf,eACE,6BAAO,SAAS,CAAC,kBAAjB,CAAoC,IAAI,CAAC,UAAzC,CAAoD,EAAE,CAAC,wBAAvD,CAAgF,QAAQ,CAAE,kBAAC5B,CAAD,QAAK,CAAA,MAAI,CAACQ,cAAL,CAAoBR,CAApB,CAAL,EAA1F,EADF,cAEE,6BAAO,SAAS,CAAC,kBAAjB,CAAoC,OAAO,CAAC,wBAA5C,EAAsE4B,CAAC,CAAC,iBAAD,CAAvE,CAFF,CADA,CADF,cAOE,2BAAK,SAAS,CAAC,gBAAf,EAPF,cASE,2BAAK,SAAS,CAAC,kEAAf,eACE,yBAAG,SAAS,CAAC,uBAAb,EACCF,QAAQ,GAAG,KAAX,CAAmB1C,gBAAgB,CAACgC,UAAD,CAAnC,CAAkDhC,gBAAgB,CAACqD,UAAU,CAACtD,UAAU,CAACiC,UAAD,CAAaU,QAAb,CAAuB,KAAvB,CAAX,CAAV,CAAoDY,OAApD,CAA4D,CAA5D,CAAD,CADnE,KACsIZ,QADtI,CADF,CAIGC,QAAQ,CAAIlB,IAAI,CAAC,CAAD,CAAJ,eAAW,8BAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACrB,aAAL,EAAN,EAAlD,eAA8E,yBAAG,SAAS,CAAC,wBAAb,EAA9E,CAAyHwC,CAAC,CAAC,sBAAD,CAA1H,CAAf,cAAgL,yBAAG,SAAS,CAAC,sBAAb,CAAoC,IAAI,CAAC,iBAAzC,EAA4DA,CAAC,CAAC,qBAAD,CAA7D,CAJ3L,CATF,CAHF,CADF,CADF,CAzEF,CADF,CADA,CAsGD,C,sBA/KoBlD,S,EAmLvB,GAAM6D,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACzB,KAAD,CAAU,CAChC,MAAO,CACLL,IAAI,CAAEK,KAAK,CAACL,IADP,CAELnB,QAAQ,CAAEwB,KAAK,CAACxB,QAFX,CAGLoC,QAAQ,CAAEZ,KAAK,CAACY,QAHX,CAILC,QAAQ,CAAEb,KAAK,CAAC0B,IAAN,CAAWC,MAJhB,CAAP,CAMD,CAPD,CASA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAWxD,KAAX,CAAqB,CAC9C,MAAO,CACLW,qBAAqB,CAAE,+BAACJ,OAAD,CAAUC,KAAV,CAAoB,CACzCgD,QAAQ,CAAC7D,eAAe,CAACgB,qBAAhB,CAAsCJ,OAAtC,CAA+CC,KAA/C,CAAD,CAAR,CACD,CAHI,CAILE,qBAAqB,CAAE,+BAACH,OAAD,CAAUC,KAAV,CAAiBC,QAAjB,CAA8B,CACnD+C,QAAQ,CAAC7D,eAAe,CAACe,qBAAhB,CAAsCH,OAAtC,CAA8CC,KAA9C,CAAqDC,QAArD,CAAD,CAAR,CACD,CANI,CAOLQ,aAAa,CAAE,uBAACwC,OAAD,CAAa,CAC1BD,QAAQ,CAAC7D,eAAe,CAACsB,aAAhB,CAA8BwC,OAA9B,CAAD,CAAR,CACD,CATI,CAULvC,gBAAgB,CAAE,0BAACuC,OAAD,CAAa,CAC7BD,QAAQ,CAAC7D,eAAe,CAACuB,gBAAhB,CAAiCuC,OAAjC,CAAD,CAAR,CACD,CAZI,CAaLjC,kBAAkB,CAAE,6BAAM,CACxBgC,QAAQ,CAAC7D,eAAe,CAAC+D,eAAhB,EAAD,CAAR,CACD,CAfI,CAgBLnC,aAAa,CAAE,uBAACkC,OAAD,CAAa,CAC1BD,QAAQ,CAAC7D,eAAe,CAAC4B,aAAhB,CAA8BkC,OAA9B,CAAD,CAAR,CACD,CAlBI,CAAP,CAoBD,CArBD,CAsBA,GAAME,CAAAA,WAAW,CAAGnE,OAAO,CAAC4D,eAAD,CAAkBG,kBAAlB,CAA3B,CACA,cAAe9D,CAAAA,OAAO,CACpBkE,WADoB,CAEpBjE,eAAe,EAFK,CAAP,CAGbK,QAHa,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from 'react-redux';\nimport {compose} from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport ProductsActions from '../../redux/actions/products';\nimport './styles.css';\n// Functions\nimport tryConvert from '../../utils/changeMoney';\nimport numberWithCommas from \"../../utils/formatPrice\";\nimport { toastError } from '../../utils/toastHelper';\n\nclass CartPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      total: 0,\n      totalPrice: 0,\n      checkedAll: false\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    document.title = \"[ApumStore] Trang bán hàng\"\n  }\n\n  componentDidUpdate(prevProps) {\n    var total = 0;\n    var totalPrice=0;\n    var {checkout} = this.props;\n    if (checkout !== prevProps.checkout) {\n      for(let i=0; i< checkout.length; i++){\n        total = total + checkout[i].quantity\n        totalPrice = totalPrice+ checkout[i].quantity* checkout[i].product.colors.find(item=> item.id === checkout[i].color).price\n      }\n      this.setState({ \n        total,\n        totalPrice\n      })\n    }\n  }\n\n  checkoutOrder = () =>{\n    const {history, checkout} = this.props;\n    if(checkout.length === 0) toastError(\"Bạn chưa chọn sản phẩm checkout\");\n    else history.push('/carts/checkout')\n  }\n\n  onUpdateQuantity = (product, color, quantity) => {\n    var {onUpdateProductInCart} = this.props;\n    if(quantity > 0){\n      onUpdateProductInCart(product,color, quantity);\n    }\n  }\n\n  onDeleteProductInCart = (product, color) => {\n    var {onDeleteProductInCart} = this.props;\n    onDeleteProductInCart(product, color);\n  }\n\n  setCheckout = (e) => {\n    const { checked, value } = e.target;\n    const { onAddCheckout, onDeleteCheckout } = this.props;\n    if(checked === true) {\n      onAddCheckout(JSON.parse(value));\n    } else {\n      onDeleteCheckout(JSON.parse(value));\n    }\n  }\n\n  setCheckoutAll = (e) => {\n    const { checked } = e.target;\n    const { cart, onCheckoutAll, onClearAllCheckout } = this.props;\n    if(checked === true) {\n      onCheckoutAll(cart);\n      this.setState({checkedAll: true})\n    } else {\n      onClearAllCheckout();\n      this.setState({checkedAll: false})\n    }\n  }\n\n  render() {\n    var { totalPrice, checkedAll } = this.state;\n    var { cart, currency, userInfo, t } = this.props;\n    return (\n    <div className=\"container my-3\">\n      <div className=\"row\">\n        <div className=\"col-12 my-2\">\n          <a className=\"text-decoration-none directory rounded p-2\" href=\"/#/\">{t('header.home.menu')}</a>\n          <i className=\"fa fa-chevron-right px-2 w-25-px\"></i>\n        </div>\n        <div className=\"col-12\">\n          <h1 className=\"font-weight-bold\">{t('cart.page.title')}</h1>\n        </div>\n        <div className=\"col-12 my-2\">\n          <div className=\"rounded shadow-sm my-2\">\n            <div className=\"px-3 py-2\">\n              <h3 className=\"mb-1\">{t('common.product')}</h3>\n              <div className=\"mb-2 border-bottom\"></div>\n              {cart.length > 0 ? cart.map((item, index) => {\n                return (\n                  <div className=\"row\" key={index}>\n                    <div className=\"col-md-1 col-2 text-center align-self-center\">\n                      <div className=\"form-check form-switch\">\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"flexSwitchCheckDefault\" checked={checkedAll || undefined} disabled={checkedAll} value={JSON.stringify(item)} onChange={(e)=>this.setCheckout(e)}/>\n                      </div>\n                    </div>\n                    <div className=\"col-md-4 col-7\">\n                      <div className=\"row\">\n                        <div className=\"col-6 col-sm-4 col-md-3 text-center\">\n                          <img className=\"float-start\" alt={item.product.name} src={item.product.bigimage ? item.product.bigimage.publicUrl : \"http://www.pha.gov.pk/img/img-02.jpg\"}></img>\n                        </div>\n                        <div className=\"col-6 col-sm-8 col-md-9 align-self-center\">\n                        <p className=\"font-weight-bold mb-0\">{item.product.name}</p>\n                        <p className=\"mb-0 text-secondary\">{t('common.color')} {item.product.colors.find(i => i.id === item.color).nameEn}</p>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"col-md-2 col-3 align-self-center text-center\">\n                    {currency===\"VND\" \n                    ? numberWithCommas(item.product.colors.find(i => i.id === item.color).price) \n                    : numberWithCommas(parseFloat(tryConvert(item.product.colors.find(i => i.id === item.color).price, currency, false)).toFixed(2))} {currency}\n                      </div>\n                    <div className=\"col-md-2 col-6 align-self-center text-center\">\n                      <div className=\"quantity form-inline\">\n                        <button type=\"button\" className=\"rounded-circle outline-none\" onClick={() => this.onUpdateQuantity(item.product, item.color, item.quantity - 1) }>\n                          <i className=\"fa fa-minus\"></i>\n                        </button>\n                        <input type=\"number\" size=\"4\" className=\"form-control\" value={item.quantity} min=\"0\" step=\"1\" readOnly/>\n                        <button type=\"button\" className=\"rounded-circle outline-none\" onClick={() => this.onUpdateQuantity(item.product, item.color, item.quantity + 1) }>\n                          <i className=\"fa fa-plus\"></i>\n                        </button>\n                      </div>\n                    </div>\n                    <div className=\"col-md-2 col-4 align-self-center text-right font-weight-bold\">\n                    {currency===\"VND\" \n                    ? numberWithCommas(item.quantity * item.product.colors.find(i => i.id === item.color).price) \n                    : numberWithCommas(parseFloat(tryConvert(item.quantity * item.product.colors.find(i => i.id === item.color).price, currency, false)).toFixed(2))} {currency}\n                    </div>\n                    <div className=\"col-md-1 col-2 text-center align-self-center\">\n                      <div className=\"form-check form-switch\">\n                        <button type=\"button\" className=\"btn-close rounded-circle bg-light p-2\" onClick={()=> this.onDeleteProductInCart(item.product, item.color)}></button>\n                      </div>\n                    </div>\n                  </div>\n                )\n              }) : <div className=\"row my-1\">\n              <div className=\"col-12\">\n                  <div className=\"text-center my-5 py-5\">\n                    <div className=\"h-120\">\n                      <img className=\"h-100\" src=\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/cart/9bdd8040b334d31946f49e36beaf32db.png\" alt=\"404 not found\"></img>\n                    </div>\n                    <h4>{t('header.cart.empty')}</h4>\n                  </div>\n                </div>\n              </div>}\n            </div>\n          </div>\n        </div>\n        <div className=\"col-12 my-2\">\n          <div className=\"rounded shadow-sm my-2\">\n            <div className=\"px-3 py-2\">\n              <h3 className=\"mb-1\">{t('cart.total.table')}</h3>\n              <div className=\"mb-2 border-bottom\"></div>\n              <div className=\"row\">\n                <div className=\"col-md-2 col-5 align-self-center\">\n                <div className=\"form-check form-switch\">\n                  <input className=\"form-check-input\" type=\"checkbox\" id=\"flexSwitchCheckDefault\" onChange={(e)=>this.setCheckoutAll(e)}/>\n                  <label className=\"form-check-label\" htmlFor=\"flexSwitchCheckDefault\">{t('cart.all.choose')}</label>\n                </div>\n                </div>\n                <div className=\"col-md-7 col-1\">\n                </div>\n                <div className=\"col-md-3 col-6 align-self-center form-inline justify-content-end\">\n                  <p className=\"my-0 font-weight-bold\">\n                  {currency===\"VND\" ? numberWithCommas(totalPrice) : numberWithCommas(parseFloat(tryConvert(totalPrice, currency, false)).toFixed(2))} {currency}\n                  </p>\n                  {userInfo ? (cart[0] && <button className=\"btn btn-primary ml-2\" onClick={() => this.checkoutOrder()}><i className=\"fa fa-credit-card mr-2\"></i>{t('cart.checkout.button')}</button>) :  <a className=\"btn btn-success ml-2\" href=\"/user/dang-nhap\">{t('header.login.button')}</a>}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = (state) =>{\n  return {\n    cart: state.cart,\n    checkout: state.checkout,\n    currency: state.currency,\n    userInfo: state.auth.detail,\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    onDeleteProductInCart: (product, color) => {\n      dispatch(ProductsActions.onDeleteProductInCart(product, color))\n    },\n    onUpdateProductInCart: (product, color, quantity) => {\n      dispatch(ProductsActions.onUpdateProductInCart(product,color, quantity))\n    },\n    onAddCheckout: (payload) => {\n      dispatch(ProductsActions.onAddCheckout(payload))\n    },\n    onDeleteCheckout: (payload) => {\n      dispatch(ProductsActions.onDeleteCheckout(payload))\n    },\n    onClearAllCheckout: () => {\n      dispatch(ProductsActions.onClearCheckout());\n    },\n    onCheckoutAll: (payload) => {\n      dispatch(ProductsActions.onCheckoutAll(payload))\n    }\n  }\n}\nconst withConnect = connect(mapStateToProps, mapDispatchToProps)\nexport default compose(\n  withConnect,\n  withTranslation()\n)(CartPage);"]},"metadata":{},"sourceType":"module"}