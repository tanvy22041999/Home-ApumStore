{"ast":null,"code":"import { takeEvery, fork, all, call, put } from \"redux-saga/effects\";\nimport { get } from \"lodash\";\nimport AuthorizationActions, { AuthorizationActionTypes } from \"../actions/auth\";\nimport { registerAccount, loginAccount, activateAccount, getProfile, loginGoogle, loginFacebook, forgotPassword, activatePassword } from \"../apis/auth\";\n/**\n *\n * create\n */\n\nfunction* handleRegister({\n  payload\n}) {\n  try {\n    const result = yield call(registerAccount, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 201) throw data;\n    yield put(AuthorizationActions.onRegisterSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onRegisterError(error));\n  }\n}\n\nfunction* handleLogin({\n  payload\n}) {\n  try {\n    const result = yield call(loginAccount, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginError(error));\n  }\n}\n\nfunction* handleLoginFacebook({\n  payload\n}) {\n  try {\n    const result = yield call(loginFacebook, {\n      \"access_token\": payload\n    });\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginFacebookSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginFacebookError(error));\n  }\n}\n\nfunction* handleLoginGoogle({\n  payload\n}) {\n  try {\n    const result = yield call(loginGoogle, {\n      \"access_token\": payload\n    });\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginGoogleSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginGoogleError(error));\n  }\n}\n\nfunction* handleActiveAccount({\n  payload\n}) {\n  try {\n    const result = yield call(activateAccount, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onActivateAccountSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onActivateAccountError(error));\n  }\n}\n\nfunction* handleGetProfile() {\n  try {\n    //1. Get profile\n    const result = yield call(getProfile, null);\n    const data = get(result, \"data.user\", {});\n    yield put(AuthorizationActions.onGetProfileSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onGetProfileError(error));\n  }\n}\n\nfunction* handleForgotPassword({\n  payload\n}) {\n  try {\n    const result = yield call(forgotPassword, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onForgotPasswordSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onForgotPasswordError(error));\n  }\n}\n\nfunction* handleActivePassword({\n  payload\n}) {\n  try {\n    const result = yield call(activatePassword, payload.token, payload.data);\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onActivatePasswordSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onActivatePasswordError(error));\n  }\n}\n/**\n *\n */\n\n\nexport function* watchRegister() {\n  yield takeEvery(AuthorizationActionTypes.REGISTER, handleRegister);\n}\nexport function* watchLogin() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN, handleLogin);\n}\nexport function* watchLoginFacebook() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN_FACEBOOK, handleLoginFacebook);\n}\nexport function* watchLoginGoogle() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN_GOOGLE, handleLoginGoogle);\n}\nexport function* watchActivateAccount() {\n  yield takeEvery(AuthorizationActionTypes.ACTIVATE_ACCOUNT, handleActiveAccount);\n}\nexport function* watchForgotPassword() {\n  yield takeEvery(AuthorizationActionTypes.FORGOT_PASSWORD, handleForgotPassword);\n}\nexport function* watchGetProfile() {\n  yield takeEvery(AuthorizationActionTypes.GET_PROFILE, handleGetProfile);\n}\nexport function* watchActivePassword() {\n  yield takeEvery(AuthorizationActionTypes.ACTIVATE_PASSWORD, handleActivePassword);\n}\nexport default function* rootSaga() {\n  yield all([fork(watchRegister), fork(watchLogin), fork(watchLoginFacebook), fork(watchLoginGoogle), fork(watchActivateAccount), fork(watchForgotPassword), fork(watchGetProfile), fork(watchActivePassword)]);\n}","map":{"version":3,"sources":["/Users/vyduong/Documents/HOME_ApumStoreSua/src/redux/sagas/auth.js"],"names":["takeEvery","fork","all","call","put","get","AuthorizationActions","AuthorizationActionTypes","registerAccount","loginAccount","activateAccount","getProfile","loginGoogle","loginFacebook","forgotPassword","activatePassword","handleRegister","payload","result","data","code","onRegisterSuccess","error","onRegisterError","handleLogin","localStorage","setItem","headers","authorization","onLoginSuccess","user","onLoginError","handleLoginFacebook","onLoginFacebookSuccess","onLoginFacebookError","handleLoginGoogle","onLoginGoogleSuccess","onLoginGoogleError","handleActiveAccount","onActivateAccountSuccess","onActivateAccountError","handleGetProfile","onGetProfileSuccess","onGetProfileError","handleForgotPassword","onForgotPasswordSuccess","onForgotPasswordError","handleActivePassword","token","onActivatePasswordSuccess","onActivatePasswordError","watchRegister","REGISTER","watchLogin","LOGIN","watchLoginFacebook","LOGIN_FACEBOOK","watchLoginGoogle","LOGIN_GOOGLE","watchActivateAccount","ACTIVATE_ACCOUNT","watchForgotPassword","FORGOT_PASSWORD","watchGetProfile","GET_PROFILE","watchActivePassword","ACTIVATE_PASSWORD","rootSaga"],"mappings":"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","sourcesContent":["import { takeEvery, fork, all, call, put } from \"redux-saga/effects\";\nimport { get } from \"lodash\";\nimport AuthorizationActions, { AuthorizationActionTypes } from \"../actions/auth\";\nimport { registerAccount, loginAccount, activateAccount, getProfile, loginGoogle, loginFacebook, forgotPassword, activatePassword} from \"../apis/auth\";\n\n/**\n *\n * create\n */\nfunction* handleRegister({ payload }) {\n  try {\n    const result = yield call(registerAccount, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 201) throw data;\n    yield put(AuthorizationActions.onRegisterSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onRegisterError(error));\n  }\n}\n\nfunction* handleLogin({ payload }) {\n  try {\n    const result = yield call(loginAccount, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginError(error));\n  }\n}\n\nfunction* handleLoginFacebook({ payload }) {\n  try {\n    const result = yield call(loginFacebook, {\"access_token\" :payload});\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginFacebookSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginFacebookError(error));\n  }\n}\n\nfunction* handleLoginGoogle({ payload }) {\n  try {\n    const result = yield call(loginGoogle, {\"access_token\":payload});\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginGoogleSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginGoogleError(error));\n  }\n}\n\nfunction* handleActiveAccount({ payload}) {\n  try {\n    const result = yield call(activateAccount, payload);\n    const data = get(result, \"data\", {});  \n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onActivateAccountSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onActivateAccountError(error));\n  }\n}\n\nfunction* handleGetProfile() {\n  try {\n    //1. Get profile\n    const result = yield call(getProfile, null);\n    const data = get(result, \"data.user\", {}); \n    yield put(AuthorizationActions.onGetProfileSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onGetProfileError(error));\n  }\n}\n\nfunction* handleForgotPassword({ payload}) {\n  try {\n    const result = yield call(forgotPassword, payload);\n    const data = get(result, \"data\", {});  \n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onForgotPasswordSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onForgotPasswordError(error));\n  }\n}\n\n\nfunction* handleActivePassword({ payload}) {\n  try {\n    const result = yield call(activatePassword, payload.token, payload.data);\n    const data = get(result, \"data\", {});  \n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onActivatePasswordSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onActivatePasswordError(error));\n  }\n}\n/**\n *\n */\n\nexport function* watchRegister() {\n  yield takeEvery(AuthorizationActionTypes.REGISTER, handleRegister);\n}\nexport function* watchLogin() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN, handleLogin);\n}\nexport function* watchLoginFacebook() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN_FACEBOOK, handleLoginFacebook);\n}\nexport function* watchLoginGoogle() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN_GOOGLE, handleLoginGoogle);\n}\nexport function* watchActivateAccount() {\n  yield takeEvery(AuthorizationActionTypes.ACTIVATE_ACCOUNT, handleActiveAccount);\n}\nexport function* watchForgotPassword() {\n  yield takeEvery(AuthorizationActionTypes.FORGOT_PASSWORD, handleForgotPassword);\n}\nexport function* watchGetProfile() {\n  yield takeEvery(AuthorizationActionTypes.GET_PROFILE, handleGetProfile);\n}\nexport function* watchActivePassword() {\n  yield takeEvery(AuthorizationActionTypes.ACTIVATE_PASSWORD, handleActivePassword);\n}\n\nexport default function* rootSaga() {\n  yield all([\n    fork(watchRegister),\n    fork(watchLogin),\n    fork(watchLoginFacebook),\n    fork(watchLoginGoogle),\n    fork(watchActivateAccount),\n    fork(watchForgotPassword),\n    fork(watchGetProfile),\n    fork(watchActivePassword),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}