{"ast":null,"code":"import _objectSpread from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from\"react-redux\";import{compose}from'redux';import{withTranslation}from'react-i18next';import qs from\"query-string\";// @Components\nimport Pagination from\"react-js-pagination\";import OrderDetail from'../../containers/OrderDetail';import InstallmentDetail from'../../containers/InstallmentDetail';// @Functions\nimport getFilterParams from\"../../utils/getFilterParams\";import{INITIAL_IMAGE}from'../../constants';// @Actions\nimport NotificationActions from\"../../redux/actions/notification\";import InstallmentActions from\"../../redux/actions/installment\";import OrdersActions from\"../../redux/actions/order\";var statusList=[{name:\"Đơn hàng\",name_en:\"Purchase\"},{name:\"Khuyến mãi\",name_en:\"Promotion\"},{name:\"Trả góp\",name_en:\"Installment\"}];var NotificationPage=/*#__PURE__*/function(_Component){_inherits(NotificationPage,_Component);var _super=_createSuper(NotificationPage);function NotificationPage(props){var _this;_classCallCheck(this,NotificationPage);_this=_super.call(this,props);_this.handleUpdateFilter=function(data){var _this$props=_this.props,location=_this$props.location,history=_this$props.history;var pathname=location.pathname,search=location.search;var queryParams=getFilterParams(search);queryParams=data;_this.setState({queryParams:queryParams});history.push(\"\".concat(pathname,\"?\").concat(qs.stringify(queryParams)));};_this.onReadAllNoti=function(){var _this$props2=_this.props,authInfo=_this$props2.authInfo,onUpdateAll=_this$props2.onUpdateAll;var queryParams=_this.state.queryParams;var data={user:authInfo.id};onUpdateAll(data,queryParams);};_this.onDeleteAllNoti=function(){var _this$props3=_this.props,authInfo=_this$props3.authInfo,onDeleteAll=_this$props3.onDeleteAll;var queryParams=_this.state.queryParams;var id=authInfo.id;onDeleteAll(id,queryParams);};_this.onReadNoti=function(id,type,link){var _this$props4=_this.props,onUpdate=_this$props4.onUpdate,history=_this$props4.history,onGetDetailInstallment=_this$props4.onGetDetailInstallment,onGetDetailOrder=_this$props4.onGetDetailOrder;var queryParams=_this.state.queryParams;var data={active:false};switch(type){case 0:_this.setState({type:type});onGetDetailOrder(link);break;case 1:history.push(link.replace(\"https://localhost:5000/#\",\"\"));break;case 2:_this.setState({type:type});onGetDetailInstallment(link);break;default:return null;}onUpdate(id,data,queryParams);};_this.handlePageChange=function(pageNumber){_this.handleUpdateFilter({page:pageNumber-1});};_this.onDeleteNoti=function(id){var onDelete=_this.props.onDelete;var queryParams=_this.state.queryParams;onDelete(id,queryParams);};_this.setModal=function(type){switch(type){case 0:return\"#orderModal\";case 1:return\"\";case 2:return\"#myModal\";default:return\"\";}};_this.state={keyword:\"\",filter:{limit:10,page:0},queryParams:{limit:10,page:0},type:2};return _this;}_createClass(NotificationPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props5=this.props,onGetList=_this$props5.onGetList,authInfo=_this$props5.authInfo,location=_this$props5.location;var filter=this.state.filter;if(authInfo){var filters=getFilterParams(location.search);var params=_objectSpread(_objectSpread(_objectSpread({},filter),filters),{},{user:authInfo&&authInfo.id});this.setState({queryParams:params});onGetList(params);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props6=this.props,location=_this$props6.location,onGetList=_this$props6.onGetList,authInfo=_this$props6.authInfo;var filter=this.state.filter;var filters=getFilterParams(location.search);if(prevProps.location!==location){var params=_objectSpread(_objectSpread(_objectSpread({},filter),filters),{},{user:authInfo&&authInfo.id});this.setState({queryParams:params});onGetList(params);}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(props){var authInfo=this.props.authInfo;document.title=\"[ApumStore] Trang bán hàng\";if(props.authInfo!==authInfo){var _this$props7=this.props,onGetList=_this$props7.onGetList,location=_this$props7.location;var filter=this.state.filter;var filters=getFilterParams(location.search);var params=_objectSpread(_objectSpread(_objectSpread({},filter),filters),{},{user:props.authInfo&&props.authInfo.id});this.setState({queryParams:params});if(props.authInfo)onGetList(params);}}},{key:\"render\",value:function render(){var _this2=this;var _this$props8=this.props,listNotification=_this$props8.listNotification,location=_this$props8.location,t=_this$props8.t,installmentItem=_this$props8.installmentItem,orderItem=_this$props8.orderItem,history=_this$props8.history,total=_this$props8.total,language=_this$props8.language;var filter=getFilterParams(location.search);return/*#__PURE__*/React.createElement(\"div\",{className:\"bg-user-info py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container emp-profile p-0 mt-5 mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mx-3\"},/*#__PURE__*/React.createElement(\"div\",{className:filter.type===undefined?\"col-2 text-center pt-1 bg-selected font-weight-bold \":\"col-2 text-center pt-1 font-weight-bold text-secondary\",onClick:function onClick(){return _this2.handleUpdateFilter();}},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(filter.type!==undefined&&\"rounded directory\",\" py-3\")},t('common.all'))),statusList.map(function(status,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:filter.type===index.toString()?\"col-2 text-center pt-1 bg-selected font-weight-bold\":\"col-2 text-center pt-1 font-weight-bold text-secondary\",onClick:function onClick(){return _this2.handleUpdateFilter({type:index});}},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(filter.type!==index.toString()&&\"rounded directory\",\" py-3\")},language===\"vn\"?status.name:status.name_en));}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 text-right align-self-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary mr-2\",onClick:function onClick(){return _this2.onReadAllNoti();}},t('notification.read-all.button')),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return _this2.onDeleteAllNoti();}},t('notification.delete-all.button'))))),/*#__PURE__*/React.createElement(\"div\",{className:\"container emp-profile py-3 my-2\"},listNotification&&listNotification.length>0?listNotification.map(function(notification,index){return/*#__PURE__*/React.createElement(\"div\",{className:notification.active===true?\"row h-120 rounded shadow-sm py-2 my-4 bg-active\":\"row h-120 rounded shadow-sm py-2 my-4\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 text-center align-self-center\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0 text-secondary\"},new Date(notification.createdAt).toLocaleDateString(\"vi-VN\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 text-center h-100\"},/*#__PURE__*/React.createElement(\"img\",{className:\"h-100\",src:notification.image?notification.image.publicUrl:INITIAL_IMAGE,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7 align-self-center\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},notification.name),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0 text-secondary\"},notification.content)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 text-right align-self-center\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success mr-2\",\"data-bs-toggle\":notification.type===1?\"\":\"modal\",\"data-bs-target\":_this2.setModal(notification.type),onClick:function onClick(){return _this2.onReadNoti(notification.id,notification.type,notification.link);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-book-reader\"})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-info\",onClick:function onClick(){return _this2.onDeleteNoti(notification.id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash-alt\"}))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"row my-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center my-5 py-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-120\"},/*#__PURE__*/React.createElement(\"img\",{className:\"h-100\",src:\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/fa4e2b534c2928596a6deded9c730a21.png\",alt:\"404 not found\"})),/*#__PURE__*/React.createElement(\"p\",null,t('header.notification.empty')))))),/*#__PURE__*/React.createElement(InstallmentDetail,{installmentItem:installmentItem,history:history}),/*#__PURE__*/React.createElement(OrderDetail,{orderItem:orderItem,history:history}),/*#__PURE__*/React.createElement(\"div\",{className:\"content-center\"},total&&total>8&&/*#__PURE__*/React.createElement(Pagination,{activePage:filter.page?parseInt(filter.page)+1:1,itemsCountPerPage:8,totalItemsCount:total?total:8,pageRangeDisplayed:3,linkClass:\"page-link\",itemClass:\"page-item\",prevPageText:t('shop.pagination.prev'),nextPageText:t('shop.pagination.next'),hideFirstLastPages:true,onChange:this.handlePageChange.bind(this)})));}}]);return NotificationPage;}(Component);var mapStateToProps=function mapStateToProps(state){return{language:state.language,authInfo:state.auth.detail,listNotification:state.notification.list,total:state.notification.total,installmentItem:state.installment.detail,orderItem:state.order.detail};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onGetList:function onGetList(payload){dispatch(NotificationActions.onGetList(payload));},onGetDetailInstallment:function onGetDetailInstallment(id){dispatch(InstallmentActions.onGetDetail(id));},onGetDetailOrder:function onGetDetailOrder(id){dispatch(OrdersActions.onGetDetail(id));},onUpdate:function onUpdate(id,data,params){dispatch(NotificationActions.onUpdate(id,data,params));},onUpdateAll:function onUpdateAll(data,params){dispatch(NotificationActions.onUpdateAll(data,params));},onDelete:function onDelete(id,params){dispatch(NotificationActions.onDelete(id,params));},onDeleteAll:function onDeleteAll(id,params){dispatch(NotificationActions.onDeleteAll(id,params));}};};var withConnect=connect(mapStateToProps,mapDispatchToProps);export default compose(withConnect,withTranslation())(NotificationPage);","map":{"version":3,"sources":["/Users/vyduong/Desktop/client/Home-ApumStore/src/components/NotificationPage/index.js"],"names":["React","Component","connect","compose","withTranslation","qs","Pagination","OrderDetail","InstallmentDetail","getFilterParams","INITIAL_IMAGE","NotificationActions","InstallmentActions","OrdersActions","statusList","name","name_en","NotificationPage","props","handleUpdateFilter","data","location","history","pathname","search","queryParams","setState","push","stringify","onReadAllNoti","authInfo","onUpdateAll","state","user","id","onDeleteAllNoti","onDeleteAll","onReadNoti","type","link","onUpdate","onGetDetailInstallment","onGetDetailOrder","active","replace","handlePageChange","pageNumber","page","onDeleteNoti","onDelete","setModal","keyword","filter","limit","onGetList","filters","params","prevProps","document","title","listNotification","t","installmentItem","orderItem","total","language","undefined","map","status","index","toString","length","notification","Date","createdAt","toLocaleDateString","image","publicUrl","content","parseInt","bind","mapStateToProps","auth","detail","list","installment","order","mapDispatchToProps","dispatch","payload","onGetDetail","withConnect"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from \"react-redux\";\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next'\nimport qs from \"query-string\";\n// @Components\nimport Pagination from \"react-js-pagination\";\nimport OrderDetail from '../../containers/OrderDetail'\nimport InstallmentDetail from '../../containers/InstallmentDetail'\n// @Functions\nimport getFilterParams from \"../../utils/getFilterParams\";\nimport {INITIAL_IMAGE} from '../../constants';\n// @Actions\nimport NotificationActions from \"../../redux/actions/notification\";\nimport InstallmentActions from \"../../redux/actions/installment\";\nimport OrdersActions from \"../../redux/actions/order\";\n\nconst statusList = [\n  { \n    name: \"Đơn hàng\",\n    name_en: \"Purchase\"\n  },\n  {\n    name: \"Khuyến mãi\",\n    name_en: \"Promotion\"\n  },\n  {\n    name: \"Trả góp\",\n    name_en: \"Installment\"\n  }\n];\n\nclass NotificationPage extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      keyword: \"\",\n      filter: {\n        limit: 10,\n        page: 0,\n      },\n      queryParams: {\n        limit: 10,\n        page: 0,\n      },\n      type: 2,\n    }\n  }\n\n  componentDidMount(){\n    const {onGetList, authInfo, location} = this.props;\n    const { filter } = this.state;\n    if(authInfo){\n      const filters = getFilterParams(location.search);\n      var params = {\n        ...filter,\n        ...filters,\n        user: authInfo && authInfo.id\n      };\n      this.setState({queryParams: params})\n      onGetList(params);\n    }\n  }\n\n  componentDidUpdate(prevProps){\n    const {location, onGetList, authInfo} = this.props;\n    const { filter } = this.state;\n    const filters = getFilterParams(location.search);\n    if(prevProps.location !== location){\n      var params = {\n        ...filter,\n        ...filters,\n        user: authInfo && authInfo.id\n      };\n      this.setState({queryParams: params})\n      onGetList(params);\n    }\n  }\n\n  componentWillReceiveProps(props){\n    const {authInfo} = this.props;\n    document.title = \"[ApumStore] Trang bán hàng\"\n    if(props.authInfo !== authInfo){\n      const { onGetList, location } = this.props;\n      const { filter } = this.state;\n      const filters = getFilterParams(location.search);\n      var params = {\n        ...filter,\n        ...filters,\n        user: props.authInfo && props.authInfo.id\n      };\n      this.setState({queryParams: params})\n      if(props.authInfo)onGetList(params);\n    }\n  }\n\n  handleUpdateFilter = (data) => {\n    const {location, history} = this.props;\n    const {pathname, search} = location;\n    let queryParams = getFilterParams(search);\n    queryParams = data;\n    this.setState({queryParams})\n    history.push(`${pathname}?${qs.stringify(queryParams)}`)\n  };\n\n  onReadAllNoti = () =>{\n    const {authInfo, onUpdateAll} = this.props;\n    const {queryParams} = this.state;\n    const data = {user : authInfo.id}\n    onUpdateAll(data, queryParams)\n  }\n\n  onDeleteAllNoti = () =>{\n    const {authInfo, onDeleteAll} = this.props;\n    const {queryParams} = this.state;\n    const id = authInfo.id\n    onDeleteAll(id, queryParams)\n  }\n\n  onReadNoti = (id, type, link) =>{\n    const { onUpdate, history, onGetDetailInstallment, onGetDetailOrder } = this.props;\n    const { queryParams } = this.state;\n    const data = {\n      active : false\n    }\n    switch(type){\n      case 0:\n        this.setState({type})\n        onGetDetailOrder(link);\n        break;\n      case 1:\n        history.push(link.replace(\"https://localhost:5000/#\", \"\"))\n        break;\n      case 2:\n        this.setState({type})\n        onGetDetailInstallment(link);\n        break;\n      default:\n        return null\n    }\n    onUpdate(id, data, queryParams)\n  }\n  \n  // phân trang\n  handlePageChange = (pageNumber) => {\n    this.handleUpdateFilter({ page: pageNumber-1 });\n  }\n\n  onDeleteNoti = (id) =>{\n    const {onDelete} = this.props;\n    const {queryParams} = this.state;\n    onDelete(id, queryParams)\n  }\n\n  setModal = (type) => {\n    switch(type){\n      case 0:\n        return \"#orderModal\"\n      case 1:\n        return \"\"\n      case 2:\n        return \"#myModal\"\n      default:\n        return \"\"\n    }\n  }\n\n  render() {\n    const { listNotification, location, t, installmentItem, orderItem, history, total, language } = this.props;\n    const filter = getFilterParams(location.search);\n    return (\n      <div className=\"bg-user-info py-4\">\n        <div className=\"container emp-profile p-0 mt-5 mb-2\">\n          <div className=\"row mx-3\">\n            <div className={filter.type===undefined ? \"col-2 text-center pt-1 bg-selected font-weight-bold \" : \"col-2 text-center pt-1 font-weight-bold text-secondary\"}\n            onClick={() => this.handleUpdateFilter()}>\n              <div className={`${filter.type!==undefined && \"rounded directory\"} py-3`}>{t('common.all')}</div>\n            </div>\n            {statusList.map((status, index)=>{\n              return (\n                <div key={index} className={filter.type===(index).toString() ? \"col-2 text-center pt-1 bg-selected font-weight-bold\" : \"col-2 text-center pt-1 font-weight-bold text-secondary\"} \n                onClick={() => this.handleUpdateFilter({type : index})}>\n                  <div className={`${filter.type!==(index).toString() && \"rounded directory\"} py-3`}>{language===\"vn\" ? status.name : status.name_en}</div>\n                </div>\n              )\n            })}\n            <div className=\"col-4 text-right align-self-center\">\n              <button className=\"btn btn-primary mr-2\" onClick={()=> this.onReadAllNoti()}>{t('notification.read-all.button')}</button>\n              <button className=\"btn btn-danger\" onClick={()=> this.onDeleteAllNoti()}>{t('notification.delete-all.button')}</button>\n            </div>\n          </div>\n        </div>\n        <div className=\"container emp-profile py-3 my-2\">\n          {listNotification && listNotification.length>0 ? listNotification.map((notification, index) =>{\n            return(\n              <div className={notification.active === true ? \"row h-120 rounded shadow-sm py-2 my-4 bg-active\" : \"row h-120 rounded shadow-sm py-2 my-4\"} key={index}>\n                <div className=\"col-1 text-center align-self-center\">\n                  <p className=\"mb-0 text-secondary\">{new Date(notification.createdAt).toLocaleDateString(\"vi-VN\")}</p>\n                </div>\n                <div className=\"col-2 text-center h-100\">\n                  <img className=\"h-100\" src={notification.image ? notification.image.publicUrl : INITIAL_IMAGE} alt=\"\"></img>\n                </div>\n                <div className=\"col-7 align-self-center\">\n            <p className=\"font-weight-bold\">{notification.name}</p>\n            <p className=\"mb-0 text-secondary\">{notification.content}</p>\n                </div>\n                <div className=\"col-2 text-right align-self-center\">\n                  <button type=\"button\" className=\"btn btn-success mr-2\" \n                  data-bs-toggle={notification.type === 1 ? \"\" : \"modal\"} data-bs-target={this.setModal(notification.type)} \n                  onClick={()=> this.onReadNoti(notification.id, notification.type, notification.link)}>\n                    <i className=\"fa fa-book-reader\"></i>\n                  </button>\n                  <button type=\"button\" className=\"btn btn-info\" onClick={()=> this.onDeleteNoti(notification.id)}>\n                    <i className=\"fa fa-trash-alt\"></i>\n                  </button>\n                </div>\n              </div>\n            )\n          })\n        : <div className=\"row my-1\">\n          <div className=\"col-12\">\n              <div className=\"text-center my-5 py-5\">\n                <div className=\"h-120\">\n                  <img className=\"h-100\" src=\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/fa4e2b534c2928596a6deded9c730a21.png\" alt=\"404 not found\"></img>\n                </div>\n                <p>{t('header.notification.empty')}</p>\n              </div>\n            </div>\n          </div>}\n        </div>\n        <InstallmentDetail installmentItem={installmentItem} history={history}/>\n        <OrderDetail orderItem={orderItem} history={history}/>\n        <div className=\"content-center\">\n          {total && total > 8 && <Pagination\n            activePage={filter.page ? parseInt(filter.page)+1 : 1}\n            itemsCountPerPage={8}\n            totalItemsCount={total ? total : 8}\n            pageRangeDisplayed={3}\n            linkClass=\"page-link\"\n            itemClass=\"page-item\"\n            prevPageText={t('shop.pagination.prev')}\n            nextPageText={t('shop.pagination.next')}\n            hideFirstLastPages={true}\n            onChange={this.handlePageChange.bind(this)}\n          />}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) =>{\n  return {\n    language: state.language,\n    authInfo: state.auth.detail,\n    listNotification: state.notification.list,\n    total : state.notification.total,\n    installmentItem: state.installment.detail,\n    orderItem: state.order.detail\n  }\n}\n\nconst mapDispatchToProps =(dispatch)=> {\n\treturn {\n    onGetList: (payload) => {\n      dispatch(NotificationActions.onGetList(payload))\n    },\n    onGetDetailInstallment: (id) => {\n      dispatch(InstallmentActions.onGetDetail(id))\n    },\n    onGetDetailOrder: (id) => {\n      dispatch(OrdersActions.onGetDetail(id))\n    },\n    onUpdate: (id, data, params) => {\n      dispatch(NotificationActions.onUpdate(id, data, params))\n    },\n    onUpdateAll: (data, params) => {\n      dispatch(NotificationActions.onUpdateAll(data, params))\n    },\n    onDelete: (id, params) => {\n      dispatch(NotificationActions.onDelete(id, params))\n    },\n    onDeleteAll: (id, params) => {\n      dispatch(NotificationActions.onDeleteAll(id, params))\n    },\n\t}\n};\n\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps)\n\nexport default compose(\n  withConnect,\n  withTranslation()\n)(NotificationPage);"]},"metadata":{},"sourceType":"module"}