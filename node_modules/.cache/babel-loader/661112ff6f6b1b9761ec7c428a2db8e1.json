{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(handleRegister),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(handleLogin),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(handleLoginFacebook),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(handleLoginGoogle),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(handleActiveAccount),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(handleGetProfile),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(handleForgotPassword),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(handleActivePassword),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(watchRegister),_marked10=/*#__PURE__*/_regeneratorRuntime.mark(watchLogin),_marked11=/*#__PURE__*/_regeneratorRuntime.mark(watchLoginFacebook),_marked12=/*#__PURE__*/_regeneratorRuntime.mark(watchLoginGoogle),_marked13=/*#__PURE__*/_regeneratorRuntime.mark(watchActivateAccount),_marked14=/*#__PURE__*/_regeneratorRuntime.mark(watchForgotPassword),_marked15=/*#__PURE__*/_regeneratorRuntime.mark(watchGetProfile),_marked16=/*#__PURE__*/_regeneratorRuntime.mark(watchActivePassword),_marked17=/*#__PURE__*/_regeneratorRuntime.mark(rootSaga);import{takeEvery,fork,all,call,put}from\"redux-saga/effects\";import{get}from\"lodash\";import AuthorizationActions,{AuthorizationActionTypes}from\"../actions/auth\";import{registerAccount,loginAccount,activateAccount,getProfile,loginGoogle,loginFacebook,forgotPassword,activatePassword}from\"../apis/auth\";/**\n *\n * create\n */function handleRegister(_ref){var payload,result,data;return _regeneratorRuntime.wrap(function handleRegister$(_context){while(1){switch(_context.prev=_context.next){case 0:payload=_ref.payload;_context.prev=1;_context.next=4;return call(registerAccount,payload);case 4:result=_context.sent;data=get(result,\"data\",{});if(!(data.code!==201)){_context.next=8;break;}throw data;case 8:_context.next=10;return put(AuthorizationActions.onRegisterSuccess(data));case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);_context.next=16;return put(AuthorizationActions.onRegisterError(_context.t0));case 16:case\"end\":return _context.stop();}}},_marked,null,[[1,12]]);}function handleLogin(_ref2){var payload,result,data;return _regeneratorRuntime.wrap(function handleLogin$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref2.payload;_context2.prev=1;_context2.next=4;return call(loginAccount,payload);case 4:result=_context2.sent;data=get(result,\"data\",{});if(!(data.code!==200)){_context2.next=11;break;}localStorage.removeItem('AUTH_USER');throw data;case 11:localStorage.setItem('AUTH_USER',data.user.token);_context2.next=14;return put(AuthorizationActions.onLoginSuccess(data.user));case 14:_context2.next=20;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](1);_context2.next=20;return put(AuthorizationActions.onLoginError(_context2.t0));case 20:case\"end\":return _context2.stop();}}},_marked2,null,[[1,16]]);}function handleLoginFacebook(_ref3){var payload,result,data;return _regeneratorRuntime.wrap(function handleLoginFacebook$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref3.payload;_context3.prev=1;_context3.next=4;return call(loginFacebook,{\"access_token\":payload});case 4:result=_context3.sent;data=get(result,\"data\",{});if(!(data.code!==200)){_context3.next=8;break;}throw data;case 8:localStorage.setItem('AUTH_USER',result.headers.authorization);_context3.next=11;return put(AuthorizationActions.onLoginFacebookSuccess(data.user));case 11:_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](1);_context3.next=17;return put(AuthorizationActions.onLoginFacebookError(_context3.t0));case 17:case\"end\":return _context3.stop();}}},_marked3,null,[[1,13]]);}function handleLoginGoogle(_ref4){var payload,result,data;return _regeneratorRuntime.wrap(function handleLoginGoogle$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref4.payload;_context4.prev=1;_context4.next=4;return call(loginGoogle,{\"access_token\":payload});case 4:result=_context4.sent;data=get(result,\"data\",{});if(!(data.code!==200)){_context4.next=8;break;}throw data;case 8:localStorage.setItem('AUTH_USER',result.headers.authorization);_context4.next=11;return put(AuthorizationActions.onLoginGoogleSuccess(data.user));case 11:_context4.next=17;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](1);_context4.next=17;return put(AuthorizationActions.onLoginGoogleError(_context4.t0));case 17:case\"end\":return _context4.stop();}}},_marked4,null,[[1,13]]);}function handleActiveAccount(_ref5){var payload,result,data;return _regeneratorRuntime.wrap(function handleActiveAccount$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:payload=_ref5.payload;_context5.prev=1;_context5.next=4;return call(activateAccount,payload);case 4:result=_context5.sent;data=get(result,\"data\",{});if(!(data.code!==200)){_context5.next=8;break;}throw data;case 8:_context5.next=10;return put(AuthorizationActions.onActivateAccountSuccess(data));case 10:_context5.next=16;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](1);_context5.next=16;return put(AuthorizationActions.onActivateAccountError(_context5.t0));case 16:case\"end\":return _context5.stop();}}},_marked5,null,[[1,12]]);}function handleGetProfile(){var result,data;return _regeneratorRuntime.wrap(function handleGetProfile$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return call(getProfile,null);case 3:result=_context6.sent;data=get(result,\"data.user\",{});_context6.next=7;return put(AuthorizationActions.onGetProfileSuccess(data));case 7:_context6.next=13;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](0);_context6.next=13;return put(AuthorizationActions.onGetProfileError(_context6.t0));case 13:case\"end\":return _context6.stop();}}},_marked6,null,[[0,9]]);}function handleForgotPassword(_ref6){var payload,result,data;return _regeneratorRuntime.wrap(function handleForgotPassword$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:payload=_ref6.payload;_context7.prev=1;_context7.next=4;return call(forgotPassword,payload);case 4:result=_context7.sent;data=get(result,\"data\",{});if(!(data.code!==200)){_context7.next=8;break;}throw data;case 8:_context7.next=10;return put(AuthorizationActions.onForgotPasswordSuccess(data));case 10:_context7.next=16;break;case 12:_context7.prev=12;_context7.t0=_context7[\"catch\"](1);_context7.next=16;return put(AuthorizationActions.onForgotPasswordError(_context7.t0));case 16:case\"end\":return _context7.stop();}}},_marked7,null,[[1,12]]);}function handleActivePassword(_ref7){var payload,result,data;return _regeneratorRuntime.wrap(function handleActivePassword$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:payload=_ref7.payload;_context8.prev=1;_context8.next=4;return call(activatePassword,payload.token,payload.data);case 4:result=_context8.sent;data=get(result,\"data\",{});if(!(data.code!==200)){_context8.next=8;break;}throw data;case 8:_context8.next=10;return put(AuthorizationActions.onActivatePasswordSuccess(data));case 10:_context8.next=16;break;case 12:_context8.prev=12;_context8.t0=_context8[\"catch\"](1);_context8.next=16;return put(AuthorizationActions.onActivatePasswordError(_context8.t0));case 16:case\"end\":return _context8.stop();}}},_marked8,null,[[1,12]]);}/**\n *\n */export function watchRegister(){return _regeneratorRuntime.wrap(function watchRegister$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return takeEvery(AuthorizationActionTypes.REGISTER,handleRegister);case 2:case\"end\":return _context9.stop();}}},_marked9);}export function watchLogin(){return _regeneratorRuntime.wrap(function watchLogin$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return takeEvery(AuthorizationActionTypes.LOGIN,handleLogin);case 2:case\"end\":return _context10.stop();}}},_marked10);}export function watchLoginFacebook(){return _regeneratorRuntime.wrap(function watchLoginFacebook$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return takeEvery(AuthorizationActionTypes.LOGIN_FACEBOOK,handleLoginFacebook);case 2:case\"end\":return _context11.stop();}}},_marked11);}export function watchLoginGoogle(){return _regeneratorRuntime.wrap(function watchLoginGoogle$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return takeEvery(AuthorizationActionTypes.LOGIN_GOOGLE,handleLoginGoogle);case 2:case\"end\":return _context12.stop();}}},_marked12);}export function watchActivateAccount(){return _regeneratorRuntime.wrap(function watchActivateAccount$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return takeEvery(AuthorizationActionTypes.ACTIVATE_ACCOUNT,handleActiveAccount);case 2:case\"end\":return _context13.stop();}}},_marked13);}export function watchForgotPassword(){return _regeneratorRuntime.wrap(function watchForgotPassword$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return takeEvery(AuthorizationActionTypes.FORGOT_PASSWORD,handleForgotPassword);case 2:case\"end\":return _context14.stop();}}},_marked14);}export function watchGetProfile(){return _regeneratorRuntime.wrap(function watchGetProfile$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return takeEvery(AuthorizationActionTypes.GET_PROFILE,handleGetProfile);case 2:case\"end\":return _context15.stop();}}},_marked15);}export function watchActivePassword(){return _regeneratorRuntime.wrap(function watchActivePassword$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return takeEvery(AuthorizationActionTypes.ACTIVATE_PASSWORD,handleActivePassword);case 2:case\"end\":return _context16.stop();}}},_marked16);}export default function rootSaga(){return _regeneratorRuntime.wrap(function rootSaga$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return all([fork(watchRegister),fork(watchLogin),fork(watchLoginFacebook),fork(watchLoginGoogle),fork(watchActivateAccount),fork(watchForgotPassword),fork(watchGetProfile),fork(watchActivePassword)]);case 2:case\"end\":return _context17.stop();}}},_marked17);}","map":{"version":3,"sources":["/Users/vyduong/Desktop/client/Home-ApumStore/src/redux/sagas/auth.js"],"names":["handleRegister","handleLogin","handleLoginFacebook","handleLoginGoogle","handleActiveAccount","handleGetProfile","handleForgotPassword","handleActivePassword","watchRegister","watchLogin","watchLoginFacebook","watchLoginGoogle","watchActivateAccount","watchForgotPassword","watchGetProfile","watchActivePassword","rootSaga","takeEvery","fork","all","call","put","get","AuthorizationActions","AuthorizationActionTypes","registerAccount","loginAccount","activateAccount","getProfile","loginGoogle","loginFacebook","forgotPassword","activatePassword","payload","result","data","code","onRegisterSuccess","onRegisterError","localStorage","removeItem","setItem","user","token","onLoginSuccess","onLoginError","headers","authorization","onLoginFacebookSuccess","onLoginFacebookError","onLoginGoogleSuccess","onLoginGoogleError","onActivateAccountSuccess","onActivateAccountError","onGetProfileSuccess","onGetProfileError","onForgotPasswordSuccess","onForgotPasswordError","onActivatePasswordSuccess","onActivatePasswordError","REGISTER","LOGIN","LOGIN_FACEBOOK","LOGIN_GOOGLE","ACTIVATE_ACCOUNT","FORGOT_PASSWORD","GET_PROFILE","ACTIVATE_PASSWORD"],"mappings":"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","sourcesContent":["import { takeEvery, fork, all, call, put } from \"redux-saga/effects\";\nimport { get } from \"lodash\";\nimport AuthorizationActions, { AuthorizationActionTypes } from \"../actions/auth\";\nimport { registerAccount, loginAccount, activateAccount, getProfile, loginGoogle, loginFacebook, forgotPassword, activatePassword} from \"../apis/auth\";\n\n/**\n *\n * create\n */\nfunction* handleRegister({ payload }) {\n  try {\n    const result = yield call(registerAccount, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 201) throw data;\n    yield put(AuthorizationActions.onRegisterSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onRegisterError(error));\n  }\n}\n\nfunction* handleLogin({ payload }) {\n  try {\n    const result = yield call(loginAccount, payload);\n    const data = get(result, \"data\", {});\n    if (data.code !== 200){\n      localStorage.removeItem('AUTH_USER');\n      throw data;\n    }\n    else{\n      localStorage.setItem('AUTH_USER', data.user.token);\n      yield put(AuthorizationActions.onLoginSuccess(data.user));\n    }\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginError(error));\n  }\n}\n\nfunction* handleLoginFacebook({ payload }) {\n  try {\n    const result = yield call(loginFacebook, {\"access_token\" :payload});\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginFacebookSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginFacebookError(error));\n  }\n}\n\nfunction* handleLoginGoogle({ payload }) {\n  try {\n    const result = yield call(loginGoogle, {\"access_token\":payload});\n    const data = get(result, \"data\", {});\n    if (data.code !== 200) throw data;\n    localStorage.setItem('AUTH_USER', result.headers.authorization);\n    yield put(AuthorizationActions.onLoginGoogleSuccess(data.user));\n  } catch (error) {\n    yield put(AuthorizationActions.onLoginGoogleError(error));\n  }\n}\n\nfunction* handleActiveAccount({ payload}) {\n  try {\n    const result = yield call(activateAccount, payload);\n    const data = get(result, \"data\", {});  \n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onActivateAccountSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onActivateAccountError(error));\n  }\n}\n\nfunction* handleGetProfile() {\n  try {\n    //1. Get profile\n    const result = yield call(getProfile, null);\n    const data = get(result, \"data.user\", {}); \n    yield put(AuthorizationActions.onGetProfileSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onGetProfileError(error));\n  }\n}\n\nfunction* handleForgotPassword({ payload}) {\n  try {\n    const result = yield call(forgotPassword, payload);\n    const data = get(result, \"data\", {});  \n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onForgotPasswordSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onForgotPasswordError(error));\n  }\n}\n\n\nfunction* handleActivePassword({ payload}) {\n  try {\n    const result = yield call(activatePassword, payload.token, payload.data);\n    const data = get(result, \"data\", {});  \n    if (data.code !== 200) throw data;\n    yield put(AuthorizationActions.onActivatePasswordSuccess(data));\n  } catch (error) {\n    yield put(AuthorizationActions.onActivatePasswordError(error));\n  }\n}\n/**\n *\n */\n\nexport function* watchRegister() {\n  yield takeEvery(AuthorizationActionTypes.REGISTER, handleRegister);\n}\nexport function* watchLogin() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN, handleLogin);\n}\nexport function* watchLoginFacebook() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN_FACEBOOK, handleLoginFacebook);\n}\nexport function* watchLoginGoogle() {\n  yield takeEvery(AuthorizationActionTypes.LOGIN_GOOGLE, handleLoginGoogle);\n}\nexport function* watchActivateAccount() {\n  yield takeEvery(AuthorizationActionTypes.ACTIVATE_ACCOUNT, handleActiveAccount);\n}\nexport function* watchForgotPassword() {\n  yield takeEvery(AuthorizationActionTypes.FORGOT_PASSWORD, handleForgotPassword);\n}\nexport function* watchGetProfile() {\n  yield takeEvery(AuthorizationActionTypes.GET_PROFILE, handleGetProfile);\n}\nexport function* watchActivePassword() {\n  yield takeEvery(AuthorizationActionTypes.ACTIVATE_PASSWORD, handleActivePassword);\n}\n\nexport default function* rootSaga() {\n  yield all([\n    fork(watchRegister),\n    fork(watchLogin),\n    fork(watchLoginFacebook),\n    fork(watchLoginGoogle),\n    fork(watchActivateAccount),\n    fork(watchForgotPassword),\n    fork(watchGetProfile),\n    fork(watchActivePassword),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}