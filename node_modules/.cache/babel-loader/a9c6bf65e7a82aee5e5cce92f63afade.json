{"ast":null,"code":"var _jsxFileName = \"/Users/vyduong/Documents/Home-ApumStore/src/components/SearchPage/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport qs from \"query-string\"; // @Actions\n\nimport ProductsActions from '../../redux/actions/products';\nimport CategoryActions from '../../redux/actions/categories'; // @Functions\n\nimport getFilterParams from \"../../utils/getFilterParams\"; // @Components\n\nimport ProductItem from \"../../containers/ProductItem\";\nimport Pagination from \"react-js-pagination\";\n\nclass SearchPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleUpdateFilter = data => {\n      const {\n        location,\n        history\n      } = this.props;\n      const {\n        pathname,\n        search\n      } = location;\n      let queryParams = getFilterParams(search);\n      queryParams = { ...queryParams,\n        ...data\n      };\n      history.push(`${pathname}?${qs.stringify(queryParams)}`);\n    };\n\n    this.handleChangeSortPrice = event => {\n      this.handleUpdateFilter({\n        sort_p: event.target.value,\n        page: 0\n      });\n    };\n\n    this.onSetCategory = value => {\n      this.handleUpdateFilter({\n        category: value,\n        page: 0\n      });\n    };\n\n    const {\n      location: _location\n    } = props;\n    const filter = getFilterParams(_location.search);\n    this.state = {\n      keyword: filter.keyword === null ? \"\" : filter.keyword,\n      filter: {\n        limit: 12,\n        page: 0\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      location,\n      onGetList,\n      onGetListCategory\n    } = this.props;\n\n    if (prevProps.location.search !== location.search) {\n      const filters = getFilterParams(location.search);\n      const {\n        filter\n      } = this.state;\n      var params = { ...filter,\n        ...filters\n      };\n      onGetList(params);\n      onGetListCategory(params);\n    }\n  }\n\n  // phân trang\n  handlePageChange(pageNumber) {\n    this.handleUpdateFilter({\n      page: pageNumber - 1\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    const {\n      onGetList,\n      location,\n      onGetListCategory\n    } = this.props;\n    const {\n      filter,\n      keyword\n    } = this.state;\n    document.title = `Kết quả tìm kiếm '${keyword}'`;\n    const filters = getFilterParams(location.search);\n    var params = { ...filter,\n      ...filters\n    };\n    onGetList(params);\n    onGetListCategory(params);\n  }\n\n  render() {\n    const {\n      location,\n      listProducts,\n      total,\n      listCategory,\n      t\n    } = this.props;\n    const filter = getFilterParams(location.search);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"single-product-area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"text-decoration-none directory rounded p-2\",\n      href: \"/#/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }, t('header.home.menu')), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-chevron-right px-2 w-25-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }, t(\"search.label\")))), total > 0 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"border-bottom pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }, t('search.result.title'), \" '\", filter.keyword, \"'\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: filter.category === null || filter.category === undefined ? \"rounded-pill shadow-sm bg-info text-dark my-2 mr-2 position-relative btn-padding\" : \"rounded-pill shadow-sm bg-active text-dark my-2 mr-2 position-relative btn-padding\",\n      onClick: () => this.onSetCategory(null),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, t('common.all')), listCategory && listCategory.map((category, index) => {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: filter.category === category._id._id ? \"rounded-pill shadow-sm bg-info text-dark mr-2 my-2 position-relative btn-padding\" : \"rounded-pill shadow-sm bg-active text-dark mr-2 my-2 position-relative btn-padding\",\n        key: index,\n        onClick: () => this.onSetCategory(category._id._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, category._id.name, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"product-count\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 19\n        }\n      }, category.count));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, t('shop.search.first'), \" \", total, \" \", t('shop.search.last'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      value: filter.sort_p,\n      className: \"form-select float-end w-fit-content\",\n      onChange: this.handleChangeSortPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      key: -1,\n      value: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 19\n      }\n    }, t('shop.sort.price')), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 19\n      }\n    }, t('shop.sort.inc')), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }, t('shop.sort.des')))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, listProducts && listProducts.map((product, index) => {\n      return /*#__PURE__*/React.createElement(ProductItem, {\n        product: product,\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 23\n        }\n      });\n    })))), total === 0 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row my-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center my-5 py-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"h-120\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"h-100\",\n      src: \"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/a60759ad1dabe909c46a817ecbf71878.png\",\n      alt: \"404 not found\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, t('search.not-yet.h3'))))), total > 0 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-pagination text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"float-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      activePage: filter.page ? parseInt(filter.page) + 1 : 1,\n      itemsCountPerPage: 4,\n      totalItemsCount: total ? total : 10,\n      pageRangeDisplayed: 3,\n      linkClass: \"page-link\",\n      itemClass: \"page-item\",\n      prevPageText: t('shop.pagination.prev'),\n      nextPageText: t('shop.pagination.next'),\n      hideFirstLastPages: true,\n      onChange: this.handlePageChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    listProducts: state.products.list,\n    listCategory: state.categories.search,\n    total: state.products.total\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    onGetList: params => {\n      dispatch(ProductsActions.onGetList(params));\n    },\n    onGetListCategory: params => {\n      dispatch(CategoryActions.onGetListKeyword(params));\n    }\n  };\n};\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps);\nexport default compose(withConnect, withTranslation())(SearchPage);","map":{"version":3,"sources":["/Users/vyduong/Documents/Home-ApumStore/src/components/SearchPage/index.js"],"names":["React","Component","connect","compose","withTranslation","qs","ProductsActions","CategoryActions","getFilterParams","ProductItem","Pagination","SearchPage","constructor","props","handleUpdateFilter","data","location","history","pathname","search","queryParams","push","stringify","handleChangeSortPrice","event","sort_p","target","value","page","onSetCategory","category","filter","state","keyword","limit","componentDidUpdate","prevProps","onGetList","onGetListCategory","filters","params","handlePageChange","pageNumber","UNSAFE_componentWillMount","document","title","render","listProducts","total","listCategory","t","undefined","map","index","_id","name","count","product","parseInt","bind","mapStateToProps","products","list","categories","mapDispatchToProps","dispatch","onGetListKeyword","withConnect"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next'\nimport qs from \"query-string\";\n// @Actions\nimport ProductsActions from '../../redux/actions/products'\nimport CategoryActions from '../../redux/actions/categories'\n// @Functions\nimport getFilterParams from \"../../utils/getFilterParams\";\n// @Components\nimport ProductItem from \"../../containers/ProductItem\"\nimport Pagination from \"react-js-pagination\";\n\nclass SearchPage extends Component {\n  constructor(props){\n    super(props);\n    const {location} = props;\n    const filter = getFilterParams(location.search);\n    this.state = {\n      keyword: filter.keyword ===null ? \"\" : filter.keyword,\n      filter: {\n        limit: 12,\n        page: 0,\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {location, onGetList, onGetListCategory} = this.props\n    if (prevProps.location.search !== location.search) {\n      const filters = getFilterParams(location.search);\n      const { filter } = this.state;\n      var params = {\n        ...filter,\n        ...filters\n      };\n      onGetList(params);\n      onGetListCategory(params);\n    }\n  }\n\n  handleUpdateFilter = (data) => {\n    const {location, history} = this.props;\n    const {pathname, search} = location;\n    let queryParams = getFilterParams(search);\n    queryParams = {\n      ...queryParams,\n      ...data,\n    };\n    history.push(`${pathname}?${qs.stringify(queryParams)}`);\n  };\n\n  // Sort price\n  handleChangeSortPrice = (event) =>{\n    this.handleUpdateFilter({ sort_p: event.target.value, page : 0 });\n  }\n\n  // Sort with categories\n  onSetCategory = (value) => {\n    this.handleUpdateFilter({ category: value, page: 0 });\n  }\n  // phân trang\n  handlePageChange(pageNumber) {\n    this.handleUpdateFilter({ page: pageNumber-1 });\n  }\n\n  UNSAFE_componentWillMount() {\n    const { onGetList, location, onGetListCategory } = this.props;\n    const { filter, keyword } = this.state;\n    document.title = `Kết quả tìm kiếm '${keyword}'`\n    const filters = getFilterParams(location.search);\n    var params = {\n      ...filter,\n      ...filters\n    };\n    onGetList(params);\n    onGetListCategory(params)\n  }\n\n  render() {\n    const { location, listProducts, total, listCategory, t } = this.props;\n    const filter = getFilterParams(location.search);\n    return (\n      <div className=\"single-product-area\">\n        <div className=\"container my-3\">\n          <div className=\"row\">\n            <div className=\"col-12 my-2\">\n              <a className=\"text-decoration-none directory rounded p-2\" href=\"/#/\">{t('header.home.menu')}</a>\n              <i className=\"fa fa-chevron-right px-2 w-25-px\"></i>\n            </div>\n            <div className=\"col-12\">\n              <h1 className=\"font-weight-bold\">{t(\"search.label\")}</h1>\n            </div>\n          </div>\n          {total > 0 && <div className=\"row\">\n            <div className=\"col-12\">\n              <h3 className=\"border-bottom pb-2\">{t('search.result.title')} '{filter.keyword}'</h3> \n            </div>\n            <div className=\"col-12\">\n              <button type=\"button\" \n              className={(filter.category === null || filter.category === undefined) ? \"rounded-pill shadow-sm bg-info text-dark my-2 mr-2 position-relative btn-padding\" : \"rounded-pill shadow-sm bg-active text-dark my-2 mr-2 position-relative btn-padding\"} \n              onClick={()=>this.onSetCategory(null)}>{t('common.all')}</button>\n              {listCategory && \n              listCategory.map((category, index) =>{\n              return(\n                <button type=\"button\" \n                className={filter.category === category._id._id ? \"rounded-pill shadow-sm bg-info text-dark mr-2 my-2 position-relative btn-padding\" : \"rounded-pill shadow-sm bg-active text-dark mr-2 my-2 position-relative btn-padding\"} \n                key={index} onClick={()=>this.onSetCategory(category._id._id)}>\n                  {category._id.name}\n                  <span className=\"product-count\">{category.count}</span>\n                </button>\n              )})}\n            </div>\n            <div className=\"col-12\">\n              <div className=\"row\">\n                <div className=\"col-6\">\n                <p>{t('shop.search.first')} {total} {t('shop.search.last')}</p>\n                </div>\n                <div className=\"col-6\">\n                <select value={filter.sort_p} className=\"form-select float-end w-fit-content\" onChange={this.handleChangeSortPrice}>\n                  <option key={-1} value=\"0\">{t('shop.sort.price')}</option>\n                  <option value=\"1\">{t('shop.sort.inc')}</option>\n                  <option value=\"-1\">{t('shop.sort.des')}</option>\n                </select>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-12\">\n              <div className=\"row\">\n                {listProducts && listProducts.map((product, index) => {\n                  return (\n                      <ProductItem product={product} key={index} />\n                    )\n                })}\n              </div>\n            </div>\n          </div>}\n          {total === 0 && <div className=\"row my-1\">\n            <div className=\"col-12\">\n              <div className=\"text-center my-5 py-5\">\n                <div className=\"h-120\">\n                  <img className=\"h-100\" src=\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/a60759ad1dabe909c46a817ecbf71878.png\" alt=\"404 not found\"></img>\n                </div>\n                <h3>{t('search.not-yet.h3')}</h3>\n              </div>\n            </div>\n          </div>}\n          {total > 0 && <div className=\"row\">\n            <div className=\"col-md-12\">\n              <div className=\"product-pagination text-center\">\n              <nav className=\"float-end\">\n              <Pagination\n                activePage={filter.page ? parseInt(filter.page)+1 : 1}\n                itemsCountPerPage={4}\n                totalItemsCount={total ? total : 10}\n                pageRangeDisplayed={3}\n                linkClass=\"page-link\"\n                itemClass=\"page-item\"\n                prevPageText={t('shop.pagination.prev')}\n                nextPageText={t('shop.pagination.next')}\n                hideFirstLastPages={true}\n                onChange={this.handlePageChange.bind(this)}\n              />\n              </nav>\n              </div>\n            </div> \n          </div>}\n        </div>\n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = (state) =>{\n  return {\n    listProducts: state.products.list,\n    listCategory: state.categories.search,\n    total: state.products.total,\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    onGetList: (params) => {\n      dispatch(ProductsActions.onGetList(params))\n    },\n    onGetListCategory: (params) => {\n      dispatch(CategoryActions.onGetListKeyword(params))\n    },\n  }\n}\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps)\n\nexport default compose(\n  withConnect,\n  withTranslation()\n)(SearchPage);"]},"metadata":{},"sourceType":"module"}