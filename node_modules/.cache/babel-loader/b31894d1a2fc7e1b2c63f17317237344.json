{"ast":null,"code":"import _defineProperty from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{compose}from'redux';import{withTranslation}from'react-i18next';// @Actions\nimport UsersActions from'../../redux/actions/user';import AddressActions from\"../../redux/actions/address\";var UserDetail=/*#__PURE__*/function(_Component){_inherits(UserDetail,_Component);var _super=_createSuper(UserDetail);function UserDetail(props){var _this;_classCallCheck(this,UserDetail);_this=_super.call(this,props);_this.setDistrict=function(event){var _event$target=event.target,value=_event$target.value,options=_event$target.options,selectedIndex=_event$target.selectedIndex;var onGetListDistrict=_this.props.onGetListDistrict;_this.setState({cityID:value,city:options[selectedIndex].text,district:\"\"});onGetListDistrict({province_id:event.target.value});};_this.setWard=function(event){var _event$target2=event.target,options=_event$target2.options,selectedIndex=_event$target2.selectedIndex,value=_event$target2.value;var onGetListWard=_this.props.onGetListWard;var cityID=_this.state.cityID;_this.setState({district:options[selectedIndex].text,districtID:value});onGetListWard(cityID,event.target.value);};_this.setAddress=function(event){var _event$target3=event.target,options=_event$target3.options,selectedIndex=_event$target3.selectedIndex,value=_event$target3.value;_this.setState({ward:options[selectedIndex].text,wardID:value});};_this.onChange=function(event){var target=event.target;var name=target.name;var value=target.value;_this.setState(_defineProperty({},name,value));};_this.updateProfile=function(){var _this$props=_this.props,userInfo=_this$props.userInfo,onUpdate=_this$props.onUpdate;var _this$state=_this.state,firstname=_this$state.firstname,lastname=_this$state.lastname,phonenumber=_this$state.phonenumber,address=_this$state.address,ward=_this$state.ward,city=_this$state.city,district=_this$state.district,email=_this$state.email;/* Xử lý ảnh */var selectedFile=_this.props.selectedFile;var formData=new FormData();formData.append(\"image\",selectedFile);/* Xử lý ảnh */var data={firstname:firstname,lastname:lastname,phonenumber:phonenumber,address:\"\".concat(address.replaceAll(',',''),\", \").concat(ward,\", \").concat(district,\", \").concat(city),email:email,image:selectedFile?formData:null};onUpdate(userInfo.id,data);};var _userInfo=props.userInfo,listCity=props.listCity;var lastCity;if(_userInfo.address){lastCity=listCity.find(function(obj){return obj.ProvinceName===_userInfo.address.split(', ')[3];}).ProvinceID;}else{lastCity=-1;}_this.state={firstname:_userInfo?_userInfo.firstname:\"\",lastname:_userInfo?_userInfo.lastname:\"\",phonenumber:_userInfo?_userInfo.phonenumber:\"\",address:_userInfo&&_userInfo.address?_userInfo.address.split(', ')[0]:\"\",email:_userInfo?_userInfo.email:\"\",cityID:lastCity,districtID:null,wardID:null,city:_userInfo&&_userInfo.address?_userInfo.address.split(', ')[3]:\"\",district:_userInfo&&_userInfo.address?_userInfo.address.split(', ')[2]:\"\",ward:_userInfo&&_userInfo.address?_userInfo.address.split(', ')[1]:\"\"};return _this;}_createClass(UserDetail,[{key:\"componentDidMount\",value:function componentDidMount(){var onGetListDistrict=this.props.onGetListDistrict;var cityID=this.state.cityID;if(cityID){onGetListDistrict({province_id:cityID});}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(props){var listDistrict=props.listDistrict,userInfo=props.userInfo,listCity=props.listCity;var lastCity;if(userInfo.address){lastCity=listCity.find(function(obj){return obj.ProvinceName===userInfo.address.split(', ')[3];}).ProvinceID;var _this$state2=this.state,cityID=_this$state2.cityID,districtID=_this$state2.districtID,wardID=_this$state2.wardID;var onGetListWard=this.props.onGetListWard;if(this.props.listDistrict!==props.listDistrict&&cityID===lastCity){onGetListWard(cityID,listDistrict.find(function(obj){return obj.DistrictName===userInfo.address.split(', ')[2];}).DistrictID);}if(districtID===null&&wardID===null&&props.listWard){this.setState({districtID:this.props.listDistrict.find(function(obj){return obj.DistrictName===userInfo.address.split(', ')[2];}).DistrictID,wardID:props.listWard.find(function(obj){return obj.WardName===userInfo.address.split(', ')[1];}).WardCode});}}else{lastCity=-1;}}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,firstname=_this$state3.firstname,lastname=_this$state3.lastname,phonenumber=_this$state3.phonenumber,address=_this$state3.address,email=_this$state3.email,cityID=_this$state3.cityID,districtID=_this$state3.districtID,wardID=_this$state3.wardID;var _this$props2=this.props,t=_this$props2.t,listCity=_this$props2.listCity,listDistrict=_this$props2.listDistrict,listWard=_this$props2.listWard;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row py-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"firstname\",name:\"firstname\",value:firstname,onChange:this.onChange}),/*#__PURE__*/React.createElement(\"label\",{for:\"firstname\"},t('checkout.firstname.input')))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"lastname\",name:\"lastname\",value:lastname,onChange:this.onChange}),/*#__PURE__*/React.createElement(\"label\",{for:\"lastname\"},t('checkout.lastname.input'))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row py-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"input\",{type:\"tel\",className:\"form-control\",id:\"phonenumber\",name:\"phonenumber\",value:phonenumber,onChange:this.onChange}),/*#__PURE__*/React.createElement(\"label\",{for:\"phonenumber\"},t('checkout.phone.input')))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:email,onChange:this.onChange,disabled:true}),/*#__PURE__*/React.createElement(\"label\",{for:\"email\"},\"Email\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row py-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"address\",name:\"address\",value:address,onChange:this.onChange}),/*#__PURE__*/React.createElement(\"label\",{for:\"address\"},t('checkout.address.input'))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row py-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"select\",{className:\"form-select\",type:\"text\",id:\"city\",value:cityID,onChange:this.setDistrict,required:true},listCity&&listCity.map(function(item,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:item.ProvinceID,name:\"city\"},item.ProvinceName);})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"city\"},\"T\\u1EC9nh th\\xE0nh\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"select\",{className:\"form-select\",type:\"text\",id:\"district\",value:districtID?districtID:null,onChange:this.setWard,required:true},listDistrict&&listDistrict.map(function(item,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:item.DistrictID,name:\"district\"},item.DistrictName);})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"district\"},\"Qu\\u1EADn huy\\u1EC7n\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-floating\"},/*#__PURE__*/React.createElement(\"select\",{className:\"form-select\",type:\"text\",id:\"ward\",value:wardID?wardID:null,onChange:this.setAddress,required:true},listWard&&listWard.map(function(item,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:item.WardCode,name:\"ward\"},item.WardName);})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"ward\"},\"Ph\\u01B0\\u1EDDng x\\xE3\")))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success\",\"data-bs-dismiss\":\"modal\",onClick:function onClick(){return _this2.updateProfile();}},t('user.save-change.button')));}}]);return UserDetail;}(Component);var mapStateToProps=function mapStateToProps(state){return{listDistrict:state.address.district,listWard:state.address.ward};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onUpdate:function onUpdate(id,params){dispatch(UsersActions.onUpdate({id:id,params:params}));},onGetListDistrict:function onGetListDistrict(cityID){dispatch(AddressActions.onGetDistrict(cityID));},onGetListWard:function onGetListWard(cityID,districtID){dispatch(AddressActions.onGetWard(cityID,districtID));}};};var withConnect=connect(mapStateToProps,mapDispatchToProps);export default compose(withConnect,withTranslation())(UserDetail);","map":{"version":3,"sources":["/Users/vyduong/Desktop/client/Home-ApumStore/src/containers/UserDetail/index.js"],"names":["React","Component","connect","compose","withTranslation","UsersActions","AddressActions","UserDetail","props","setDistrict","event","target","value","options","selectedIndex","onGetListDistrict","setState","cityID","city","text","district","province_id","setWard","onGetListWard","state","districtID","setAddress","ward","wardID","onChange","name","updateProfile","userInfo","onUpdate","firstname","lastname","phonenumber","address","email","selectedFile","formData","FormData","append","data","replaceAll","image","id","listCity","lastCity","find","obj","ProvinceName","split","ProvinceID","listDistrict","DistrictName","DistrictID","listWard","WardName","WardCode","t","map","item","index","mapStateToProps","mapDispatchToProps","dispatch","params","onGetDistrict","onGetWard","withConnect"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from 'react-redux';\nimport {compose} from 'redux';\nimport { withTranslation } from 'react-i18next'\n// @Actions\nimport UsersActions from '../../redux/actions/user';\nimport AddressActions from \"../../redux/actions/address\";\n\nclass UserDetail extends Component {\n  constructor(props) {\n    super(props);\n    const {userInfo, listCity} = props;\n    var lastCity;\n    if(userInfo.address){\n      lastCity = listCity.find(obj => obj.ProvinceName === userInfo.address.split(', ')[3]).ProvinceID;\n    }\n    else{\n      lastCity = -1;\n    }\n    this.state = {\n      firstname: userInfo ? userInfo.firstname :\"\",\n      lastname: userInfo ? userInfo.lastname :\"\",\n      phonenumber: userInfo ? userInfo.phonenumber :\"\",\n      address: userInfo && userInfo.address ? userInfo.address.split(', ')[0] :\"\",\n      email: userInfo ? userInfo.email :\"\",\n      cityID: lastCity,\n      districtID: null,\n      wardID: null,\n      city: userInfo && userInfo.address ? userInfo.address.split(', ')[3] : \"\",\n      district: userInfo && userInfo.address ? userInfo.address.split(', ')[2] : \"\",\n      ward: userInfo && userInfo.address ? userInfo.address.split(', ')[1] : \"\"\n    }\n  }\n\n  componentDidMount(){\n    const {onGetListDistrict} = this.props;\n    const {cityID} = this.state;\n    if(cityID){\n      onGetListDistrict({province_id: cityID})\n    }\n  }\n\n  componentWillReceiveProps(props){\n    const {listDistrict, userInfo, listCity} = props;\n    var lastCity;\n    if(userInfo.address){\n      lastCity = listCity.find(obj => obj.ProvinceName === userInfo.address.split(', ')[3]).ProvinceID;\n      const {cityID, districtID, wardID} = this.state;\n      const {onGetListWard} = this.props;\n      if(this.props.listDistrict !== props.listDistrict && cityID === lastCity){\n        onGetListWard(cityID, listDistrict.find(obj => obj.DistrictName === userInfo.address.split(', ')[2]).DistrictID)\n      }\n      if(districtID===null && wardID===null && props.listWard){\n        this.setState({\n          districtID: this.props.listDistrict.find(obj => obj.DistrictName === userInfo.address.split(', ')[2]).DistrictID,\n          wardID: props.listWard.find(obj => obj.WardName === userInfo.address.split(', ')[1]).WardCode\n        })\n      }\n    }\n    else{\n      lastCity = -1;\n    }\n  }\n\n  setDistrict = (event) =>{\n    const {value, options, selectedIndex} = event.target;\n    const {onGetListDistrict} = this.props;\n    this.setState({\n      cityID: value,\n      city: options[selectedIndex].text,\n      district: \"\",\n    })\n    onGetListDistrict({province_id: event.target.value });\n  }\n\n  setWard = (event) => {\n    const {options, selectedIndex, value} = event.target;\n    const {onGetListWard} = this.props;\n    const {cityID} = this.state;\n    this.setState({\n      district: options[selectedIndex].text,\n      districtID: value\n    })\n    onGetListWard(cityID, event.target.value);\n  }\n\n  setAddress = (event) =>{\n    const {options, selectedIndex, value} = event.target;\n    this.setState({\n      ward: options[selectedIndex].text,\n      wardID: value\n    })\n  }\n\n  onChange = (event) => {\n    var target = event.target;\n    var name = target.name;\n    var value = target.value;\n    this.setState({\n      [name]: value,\n    })\n  }\n\n\n  updateProfile =()=>{\n    const {userInfo, onUpdate} = this.props;\n    const {firstname, lastname, phonenumber, address, ward, city, district, email} = this.state;\n    /* Xử lý ảnh */\n    const {selectedFile} = this.props;\n    var formData = new FormData();\n    formData.append(\"image\",selectedFile);\n    /* Xử lý ảnh */\n    var data = {firstname, lastname, phonenumber, address : `${address.replaceAll(',', '')}, ${ward}, ${district}, ${city}`, email, image: selectedFile ? formData : null}\n    onUpdate(userInfo.id, data);\n  }\n\n  render() {\n    const {firstname, lastname, phonenumber, address, email, cityID, districtID, wardID} = this.state;\n    const {t, listCity, listDistrict, listWard} = this.props;\n\n    return (  \n      <div>\n        <div className=\"row py-2\">\n          <div className=\"col-6\">\n            <div className=\"form-floating\">\n              <input type=\"text\" className=\"form-control\" id=\"firstname\" name=\"firstname\" value={firstname} onChange={this.onChange}/>\n              <label for=\"firstname\">{t('checkout.firstname.input')}</label>\n            </div>\n          </div>\n          <div className=\"col-6\">\n            <div className=\"form-floating\">\n              <input type=\"text\" className=\"form-control\" id=\"lastname\" name=\"lastname\" value={lastname} onChange={this.onChange}/>\n              <label for=\"lastname\">{t('checkout.lastname.input')}</label>\n            </div>\n          </div>\n        </div>\n        <div className=\"row py-2\">\n          <div className=\"col-6\">\n            <div className=\"form-floating\">\n              <input type=\"tel\" className=\"form-control\" id=\"phonenumber\" name=\"phonenumber\" value={phonenumber} onChange={this.onChange}/>\n              <label for=\"phonenumber\">{t('checkout.phone.input')}</label>\n            </div>\n          </div>\n          <div className=\"col-6\">\n            <div className=\"form-floating\">\n              <input type=\"email\" className=\"form-control\" id=\"email\" name=\"email\" value={email} onChange={this.onChange} disabled/>\n              <label for=\"email\">Email</label>\n            </div>\n          </div>\n        </div>\n        <div className=\"row py-2\">\n          <div className=\"col-12\">\n            <div className=\"form-floating\">\n              <input type=\"text\" className=\"form-control\" id=\"address\" name=\"address\" value={address} onChange={this.onChange}/>\n              <label for=\"address\">{t('checkout.address.input')}</label>\n            </div>\n          </div>\n        </div>\n        <div className=\"row py-2\">\n          <div className=\"col-4\">\n            <div className=\"form-floating\">\n              <select className=\"form-select\" type=\"text\" id=\"city\" value={cityID}\n              onChange={this.setDistrict} required>\n                {listCity && listCity.map((item, index)=>{\n                    return(\n                      <option key={index} value={item.ProvinceID} name=\"city\">{item.ProvinceName}</option>\n                    )\n                  })\n                }\n              </select>\n              <label htmlFor=\"city\">Tỉnh thành</label>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"form-floating\">\n              <select  className=\"form-select\" type=\"text\" id=\"district\"\n              value={districtID ? districtID : null}\n              onChange={this.setWard} required>\n                {listDistrict && listDistrict.map((item, index)=>{\n                      return(\n                        <option key={index} value={item.DistrictID} name=\"district\">{item.DistrictName}</option>\n                      )\n                    })\n                  }\n              </select>\n              <label htmlFor=\"district\">Quận huyện</label>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"form-floating\">\n              <select  className=\"form-select\" type=\"text\" id=\"ward\"\n              value={wardID ? wardID : null}\n              onChange={this.setAddress} required>\n                {listWard && listWard.map((item, index)=>{\n                      return(\n                        <option key={index} value={item.WardCode} name=\"ward\">{item.WardName}</option>\n                      )\n                    })\n                  }\n              </select>\n              <label htmlFor=\"ward\">Phường xã</label>\n            </div>\n          </div>\n        </div>\n        <button type=\"button\" className=\"btn btn-success\" data-bs-dismiss=\"modal\" onClick={() => this.updateProfile()}>{t('user.save-change.button')}</button>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) =>{\n  return {\n    listDistrict: state.address.district,\n    listWard: state.address.ward,\n  }\n}\n\nconst mapDispatchToProps =(dispatch)=> {\n  return {\n    onUpdate : (id, params) =>{\n\t\t\tdispatch(UsersActions.onUpdate({id, params}))\n    },\n    onGetListDistrict: (cityID) => {\n      dispatch(AddressActions.onGetDistrict(cityID))\n    },\n    onGetListWard: (cityID, districtID) => {\n      dispatch(AddressActions.onGetWard(cityID, districtID))\n    }\n\t}\n};\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps)\n\nexport default compose(\n  withConnect,\n  withTranslation()\n)(UserDetail);"]},"metadata":{},"sourceType":"module"}